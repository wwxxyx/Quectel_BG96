<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ATS Rules 6.0 (1122)</title>
</head>
<body link="blue" alink="red" vlink="blue">


<h2>WiFiNetworkLoginSharing</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequestWiFiConnectionInfoRetried">RequestWiFiConnectionInfoRetried</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory retries the RequestWiFiConnectionInfo command  after it receives an iPodACK.  (The accessory is allowed to rety RequestWiFiConnectionInfo after receiving WiFiConnectionInfo.)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.69)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must not retry the RequestWiFiConnectionInfo command after it receives an iPodACK.</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WiFiNetworkLoginSharingRequiredCommandsNotSeenCA">WiFiNetworkLoginSharingRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the WiFiNetworkLoginSharing test if a required WiFiNetworkLoginSharing command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required command%@ %@ for the Wi-Fi Network Login Sharing test were not seen</td>
</tr>
</table>
<br>


<h2>AccessoryIdentificationiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryIdentificationRequiredMessagesNotSeenCAiAP2">AccessoryIdentificationRequiredMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any of the mandatory messages are not seen during the test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see required identification messages during the Automatic Tests with Apple device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DuplicateTransportComponentIdentifieriAP2">DuplicateTransportComponentIdentifieriAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if an accessory sends an IdentificationInformation with any of SerialTransportComponent, USBDeviceTransportComponent, USBHostTransportComponent, or BluetoothTransportComponent with the same TransportComponentIdentifier.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a duplicate TransportComponentIdentifier of %hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationBeforeStartIdentificationiAP2">IdentificationInformationBeforeStartIdentificationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends IdentificationInformation before receiving StartIdentification</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation before receiving StartIdentification from the Apple device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationIncorrectSourceForDeclaredReceivedMessageiAP2">IdentificationInformationIncorrectSourceForDeclaredReceivedMessageiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if accessory declares a message as received which only the Accessory may send</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory declared to receive %1$@, but only the accessory may send these messages</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationIncorrectSourceForDeclaredSentMessageiAP2">IdentificationInformationIncorrectSourceForDeclaredSentMessageiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if accessory declares a message as sent which only the Apple device may send</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory declared to send %1$@, but only the Apple device may send these messages</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationNonUniqueSupportedMessagesListiAP2">IdentificationInformationNonUniqueSupportedMessagesListiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.9</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if accessory declares support for the same message ID more than once in MessagesSentByAccessory or MessagesReceivedFromDevice</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with a non-unique set of message IDs in the MessagesSentByAccessory and/or MessagesReceivedFromDevice parameters (duplicated message%1$@: %2$@)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationUnknownSentOrReceivedMessageiAP2">IdentificationInformationUnknownSentOrReceivedMessageiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if accessory declares a message as sent or received which has an unknown message ID</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory declared to %1$@ unknown message ID%2$@ %3$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationMessageSentAfterIdentificationAcceptediAP2">IdentificationMessageSentAfterIdentificationAcceptediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if an accessory sends IdentificationInformation or CancelIdentification after receiving IdentificationAccepted from the Apple device.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %@ after already receiving IdentificationAccepted from the Apple device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToStartIdentificationOrIdentificationRejectedMessageiAP2">NoTimelyResponseToStartIdentificationOrIdentificationRejectedMessageiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if no IdentificationInformation response is seen to a StartIdentification or IdentificationRejected message within 1 second</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send IdentificationInformation within 1 second of receiving %@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTransportSupportsiAP2ConnectionParameteriAP2">NoTransportSupportsiAP2ConnectionParameteriAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if no transport component containing a TransportSupportsiAP2Connection parameter is found</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send a transport component containing TransportSupportsiAP2Connection parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostHIDComponentUSBHostTransportComponentIdentifierInvalidiAP2">USBHostHIDComponentUSBHostTransportComponentIdentifierInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if USBHostTransportComponentIdentifier in a USBHostHIDComponent does not match previously declared identifier for a USBHostTransportComponent</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a USBHostHIDComponent with a USBHostTransportComponentIdentifier that does not match an identifier in a declared USBHostTransportComponent</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnsupportedMessageSentiAP2">UnsupportedMessageSentiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error when accessory sends a message it did not declare in its MessagesSentByAccessory parameter in IdentificationInformation after IdentificationAccepted</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a message that the Apple device did not acknowledge during identification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnsupportedMessagesDeclaredCAiAP2">UnsupportedMessagesDeclaredCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if an accessory declares and uses messages it did not claim support for.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with %@</td>
</tr>
</table>
<br>


<h2>HIDiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryHIDReportPaddingBitSetToOneiAP2">AccessoryHIDReportPaddingBitSetToOneiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any padding bits in any AccessoryHIDReport's HIDReport parameter are set to 1.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryHIDReport with a HIDReport parameter in which some padding bits are set to 1</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryIdentifiediAP2HIDMessagesWithoutiAP2HIDComponentiAP2">AccessoryIdentifiediAP2HIDMessagesWithoutiAP2HIDComponentiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory identifies for iAP2 HID messages without iAP2 HID component.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for iAP2 HID messages without including an iAP2 HID component</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchHIDComponentCountInvalidiAP2">AssistiveTouchHIDComponentCountInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory's IdentificationInformation USBHostHIDComponents and iAP2HIDComponents contain more than one component that has the AssistiveTouch Pointer HIDComponentFunction.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with more than one iAP2HIDComponent or USBHostHIDComponent for HID function AssistiveTouch Pointer</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchRequiredHIDUsagePageMissingNativeUSBiAP2">AssistiveTouchRequiredHIDUsagePageMissingNativeUSBiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory fails to declare support for both the HID Generic Desktop usage page and Mouse usage for an AssistiveTouch Pointer.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an AssistiveTouch Pointer HID report descriptor without both the HID Generic Desktop usage page and the Mouse usage</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchRequiredHIDUsagePageMissingiAP2">AssistiveTouchRequiredHIDUsagePageMissingiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory specifies the AssistiveTouch Pointer HID component function in a StartHID's HIDComponentIdentifier but fails to declare support for the Generic Desktop usage page and Mouse usage in the StartHID's HIDReportDescriptor.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID for an AssistiveTouch Pointer without including both the HID Generic Desktop usage page and the Mouse usage in the report descriptor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DuplicateHIDComponentIdentifieriAP2">DuplicateHIDComponentIdentifieriAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a duplicate HIDComponentIdentifier is detected (across any HIDComponent type)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a duplicate HIDComponentIdentifier %hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerAccessoryIdentificationExceededNumberOfNFFComponentsiAP2">GameControllerAccessoryIdentificationExceededNumberOfNFFComponentsiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory reports more than 4 non form-fitting HID Game Controller components</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with %1$lu HID Components for Non Form-Fitting Gamepad HID functions, but the maximum number is 4</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerDPadOpposingCardinalDirectionsHIDSeeniAP2">GameControllerDPadOpposingCardinalDirectionsHIDSeeniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends an AccessoryHIDReport for a Game Controller that has opposing cardinal D-Pad buttons that have non-zero values in the same HID report</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad with non-zero directional pad values of opposing cardinal direction</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerDPadOpposingCardinalDirectionsNativeHIDSeeniAP2">GameControllerDPadOpposingCardinalDirectionsNativeHIDSeeniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends a HID report for a Game Controller that has opposing cardinal D-Pad buttons that have non-zero values in the same HID report</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a Gamepad with non-zero directional pad values of opposing cardinal direction</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerDigitalSwitchHIDInvalidiAP2">GameControllerDigitalSwitchHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with a GameController HID report descriptor that has a digital switch controls, but does not define the field correctly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad with a pause button digital switch that is not defined as a 1-bit value</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerDigitalSwitchNativeHIDInvalidiAP2">GameControllerDigitalSwitchNativeHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends HID report with a GameController HID report descriptor that has a digital switch controls, but does not define the field correctly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a Gamepad with a pause button digital switch that is not defined as a 1-bit value</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerInvalidLEDArrayFieldiAP2">GameControllerInvalidLEDArrayFieldiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with a GameController HID report descriptor that has LEDs, but they aren't defined as a linear array of four red LEDs</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad that defined LEDs with report size %2$lu and report count %3$lu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerInvalidNativeLEDArrayFieldiAP2">GameControllerInvalidNativeLEDArrayFieldiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends HID report with a GameController HID report descriptor that has LEDs, but they aren't defined as a linear array of four red LEDs</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a Gamepad that defined LEDs with report size %2$lu and report count %3$lu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerJoystickAxesHIDFieldSizeNotEqualiAP2">GameControllerJoystickAxesHIDFieldSizeNotEqualiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with a GameController HID report descriptor that has Joystick controls, but the axes fields aren't the same.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad with joystick axes that are not defined with equal field sizes</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerJoystickAxesNativeHIDFieldSizeNotEqualiAP2">GameControllerJoystickAxesNativeHIDFieldSizeNotEqualiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends HID report with a GameController HID report descriptor that has Joystick controls, but the axes fields aren't the same.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent native HID report for a Gamepad with joystick axes that are not defined with equal field sizes</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerJoystickHIDInvalidiAP2">GameControllerJoystickHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with a GameController HID report descriptor that has Joystick controls, but does not define the field correctly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad with a joystick axis that is not defined as supporting a range of values between -2^(n-1)+1 and 2^(n-1)-1 with a signed n-bit integer where n is 8 or more</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerJoystickNativeHIDInvalidiAP2">GameControllerJoystickNativeHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends HID report with a GameController HID report descriptor that has Joystick controls, but does not define the field correctly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a Gamepad with a joystick axis that is not defined as supporting a range of values between -2^(n-1)+1 and 2^(n-1)-1 with a signed n-bit integer where n is 8 or more</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerLEDHIDInvalidiAP2">GameControllerLEDHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with a GameController HID report descriptor that has LEDs, but they aren't defined correctly</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad with LEDs that are not defined as Output fields</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerLEDNativeHIDInvalidiAP2">GameControllerLEDNativeHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends HID report with a GameController HID report descriptor that has LEDs, but they aren't defined correctly</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a Gamepad with LEDs that are not defined as Output fields</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerMultipleFormFittingControllerComponentImplementationiAP2">GameControllerMultipleFormFittingControllerComponentImplementationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory reports more than 1 form-fitting HID Game Controller components</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with %1$lu HID Components for Form-Fitting Gamepad HID functions, but the maximum number is 1</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerPressureSensitiveSwitchHIDInvalidiAP2">GameControllerPressureSensitiveSwitchHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with a GameController HID report descriptor that has Pressure Sensitive controls, but they aren't defined correctly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a Gamepad with pressure sensitive control%2$@ %3$@ that %4$@ not defined as supporting a range of values between 0 and 2^n-1 with an unsigned n-bit integer where n is 8 or more</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerPressureSensitiveSwitchNativeHIDInvalidiAP2">GameControllerPressureSensitiveSwitchNativeHIDInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends HID report with a GameController HID report descriptor that has Pressure Sensitive controls, but they aren't defined correctly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a Gamepad with pressure sensitive control%1$@ %2$@ that %3$@ not defined as supporting a range of values between 0 and 2^n-1 with an unsigned n-bit integer where n is 8 or more</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerProhibitedUsagesSeeniAP2">GameControllerProhibitedUsagesSeeniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends StartHID with any usages which aren't allowed for the current type of Gamepad. Each section of the spec explicitly lists the control surfaces which map to HID usages</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ with prohibited Gamepad usages %2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerRequiredHIDUsagesNotDefinediAP2">GameControllerRequiredHIDUsagesNotDefinediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory uses Game Contoller but doesn't provide all required usages in the HID report descriptor</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ for a %2$@ Gamepad without the following required usage%3$@ in the HID report descriptor: %4$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerRequiredNativeHIDUsagesNotDefinediAP2">GameControllerRequiredNativeHIDUsagesNotDefinediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory uses Game Contoller but doesn't provide all required usages in the HID report descriptor</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for a %1$@ Gamepad without the following required usage%2$@ in the HID report descriptor: %3$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerSwitchesHIDNotSeenCAiAP2">GameControllerSwitchesHIDNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory did not send at least the maximum and the minimum values defined in the descriptor for each game controller switch in HID reports during the CA.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send maximum and/or minimum values for %@ during the Certification Assistant</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GameControllerWithNonControllerComponentiAP2">GameControllerWithNonControllerComponentiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory that uses HID Game Controller reports another HID function</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation that contains another HID function component besides the HID Game Controller</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="HIDFunctionClaimWithoutUSBHostHIDComponentCAiAP2">HIDFunctionClaimWithoutUSBHostHIDComponentCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory fails to identify for USBHostHIDComponents with HID functions that were claimed for.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory claimed support for HID function%@ %@, but did not send IdentificationInformation with the corresponding USBHostHIDComponent%@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="HIDFunctionClaimWithoutiAP2HIDComponentCAiAP2">HIDFunctionClaimWithoutiAP2HIDComponentCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory fails to identify for iAP2HIDComponents with HID functions that were claimed for.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory claimed support for HID function%@ %@, but did not send IdentificationInformation with the corresponding iAP2HIDComponent%@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="HIDNativeUSBHIDReportPaddingBitSetToOneiAP2">HIDNativeUSBHIDReportPaddingBitSetToOneiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any padding bits in any HID report sent over native USB transport are set to 1.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a HID report in which some padding bits are set to 1</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="HIDOveriAP2MessagesNotSeenCAiAP2">HIDOveriAP2MessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if they identify for an iAP2 HID component but do not send required messages</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature when identified for iAP2 HID</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IAP2HIDComponentWithoutHIDFunctionClaimCAiAP2">IAP2HIDComponentWithoutHIDFunctionClaimCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory identifies for iAP2HIDComponents with HID functions that weren't claimed for.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with iAP2HIDComponent%@ for HID function%@ %@, but did not claim support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="KeyboardRequiredHIDUsagePageMissingNativeUSBiAP2">KeyboardRequiredHIDUsagePageMissingNativeUSBiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory fails to declare support for the HID Keyboard/Keypad usage page in a native USB HID report descriptor for a Keyboard.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a Keyboard HID report descriptor without the HID Keyboard/Keypad usage page</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="KeyboardRequiredHIDUsagePageMissingiAP2">KeyboardRequiredHIDUsagePageMissingiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory specifies the Keyboard HID component function in a StartHID's HIDComponentIdentifier but failes to declare  support for the Keyboard HID usage page in the StartHID's HIDReportDescriptor.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID for a Keyboard without including the HID Keyboard/Keypad usage page in the report descriptor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="KeyboardWithConsumerPageInvalidHIDUsagesiAP2">KeyboardWithConsumerPageInvalidHIDUsagesiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory supplies Consumer Page HID usages in a StartHID's HIDReportDescriptor for keyboard that are not from the list of permitted usages.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID with prohibited Consumer Page HID usage%@ %@ in its HIDReportDescriptor for a Keyboard</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaPlaybackRemoteInvalidHIDUsagesNativeUSBiAP2">MediaPlaybackRemoteInvalidHIDUsagesNativeUSBiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory supplies Consumer Page HID usages in a native USB HID report descriptor for Media Playback Remote that are not from the list of permitted usages.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent Media Playback Remote HID report descriptor for interface number %hhu with prohibited Consumer Page HID usage%@ %@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaPlaybackRemoteInvalidHIDUsagesiAP2">MediaPlaybackRemoteInvalidHIDUsagesiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory supplies Consumer Page HID usages in a StartHID's HIDReportDescriptor for Media Playback Remote that are not from the list of permitted usages.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID with prohibited Consumer Page HID usage%@ %@ in its HIDReportDescriptor for a Media Playback Remote</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaPlaybackRemoteRequiredHIDUsagePageMissingNativeUSBiAP2">MediaPlaybackRemoteRequiredHIDUsagePageMissingNativeUSBiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory fails to declare support for the HID Consumer usage page in a native USB HID report descriptor for a Media Playback Remote.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a Media Playback Remote HID report descriptor without the HID Consumer usage page</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaPlaybackRemoteRequiredHIDUsagePageMissingiAP2">MediaPlaybackRemoteRequiredHIDUsagePageMissingiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory fails to declare support for the HID Consumer usage page in a StartHID's HIDReportDescriptor for a Media Playback Remote.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID for a Media Playback Remote without including the HID Consumer usage page in the report descriptor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoHIDComponentDuringIdentificationCAiAP2">NoHIDComponentDuringIdentificationCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if no HID components are identified during identification</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not declare any HID components while testing the %1$@/%2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartHIDHIDComponentIdentifierInvalidiAP2">StartHIDHIDComponentIdentifierInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the HIDComponentIdentifier in StartHID doesn't match one sent in an iAP2HIDComponent</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID with HIDComponentIdentifier (%hu) that does not match a previously identified iAP2HIDComponent</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StopHIDHIDComponentIdentifierInvalidiAP2">StopHIDHIDComponentIdentifierInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the HIDComponentIdentifier in StopHID doesn't match one sent in an iAP2HIDComponent</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StopHID with HIDComponentIdentifier (%hu) that does not match a previously identified iAP2HIDComponent</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SwitchControlHIDButtonCountInvalidiAP2">SwitchControlHIDButtonCountInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory provides a HID report descriptor that defines less than one (1) or more than sixteen buttons (16).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartHID for an Assistive Switch Control with a button usage count of %1$lu which is outside the permitted range of 1 to 16</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SwitchControlHIDButtonCountNotRecommendediAP2">SwitchControlHIDButtonCountNotRecommendediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire a warning if the accessory provides a HID report descriptor that defines only one button.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent StartHID for an Assistive Switch Control with only one button usage which is not recommended</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SwitchControlHIDComponentCountInvalidiAP2">SwitchControlHIDComponentCountInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory's IdentificationInformation USBHostHIDComponents and iAP2HIDComponents contain more than one component that has the Assistive Switch Control HIDComponentFunction.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with more than one iAP2HIDComponent or USBHostHIDComponent for HID function Assistive Switch Control</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SwitchControlNativeHIDButtonCountInvalidiAP2">SwitchControlNativeHIDButtonCountInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory provides a HID report descriptor that defines less than one (1) or more than sixteen buttons (16).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent HID report for an Assistive Switch Control with a button usage count of %1$lu which is outside the permitted range of 1 to 16</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SwitchControlNativeHIDButtonCountNotRecommendediAP2">SwitchControlNativeHIDButtonCountNotRecommendediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire a warning if the accessory provides a HID report descriptor that defines only one button.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent HID report for an Assistive Switch Control with only one button usage which is not recommended</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostHIDComponentDuplicateInterfaceNumberiAP2">USBHostHIDComponentDuplicateInterfaceNumberiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends USBHostHIDComponents with duplicate interface numbers</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent USBHostHIDComponent with duplicate interface number of %hhu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostHIDComponentUndefinedInterfaceiAP2">USBHostHIDComponentUndefinedInterfaceiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends USBHostHIDComponents with an interface number that does not represent a HID USB interface that was enumerated</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent USBHostHIDComponent with interface number of %hhu, but no matching HID interface was seen during USB enumeration</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostHIDComponentWithoutHIDFunctionClaimCAiAP2">USBHostHIDComponentWithoutHIDFunctionClaimCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory identifies for USBHostHIDComponents with HID functions that weren't claimed for.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentificationInformation with USBHostHIDComponent%@ for HID function%@ %@, but did not claim support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UsageNotSeenForSupportedHIDUsagesCAiAP2">UsageNotSeenForSupportedHIDUsagesCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory claims support for the HID iAP2 Session feature and fails to send values for all fields defined in the HID report descriptors for the HID components identified by the accessory.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send AccessoryHIDReport messages containing values for the following: %@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UsageNotSeenForSupportedHIDUsagesNativeUSBCAiAP2">UsageNotSeenForSupportedHIDUsagesNativeUSBCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory claims support for the HID Native Transport feature and fails to send values for all fields defined in the HID report descriptors for the HID components enumerated by the accessory.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send HID reports containing values for the following: %@</td>
</tr>
</table>
<br>


<h2>ExternalAccessoryProtocoliAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EAProtocolParameterSeenDuringIdentificationWithoutEAMessagesDeclarediAP2">EAProtocolParameterSeenDuringIdentificationWithoutEAMessagesDeclarediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends an ExternalAccessoryProtocol parameter group for an EA session (not EA native transport), but did not declare support for StartExternalAccessoryProtocolSession and StopExternalAccessoryProtocolSession in its MessagesReceivedFromDevice list</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is trying to use External Accessory sessions but did not declare support for StartExternalAccessoryProtocolSession and StopExternalAccessoryProtocolSession in MessagesReceivedFromDevice</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EAProtocolParameterSeenDuringIdentificationWithoutEASessionDuringLinkSynchronizationiAP2">EAProtocolParameterSeenDuringIdentificationWithoutEASessionDuringLinkSynchronizationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends an ExternalAccessoryProtocol parameter group for an EA session (not EA native transport), but did not set up an EA session during link synchronization</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is trying to use External Accessory sessions but did not set up a session during link synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EASessionDuringLinkSynchronizationWithoutiAP2EASessionProtocolParameterDuringIdentificationiAP2">EASessionDuringLinkSynchronizationWithoutiAP2EASessionProtocolParameterDuringIdentificationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory set up an EA session during link synchronization, but did not send an ExternalAccessoryProtocol parameter group for an EA session (not EA native transport)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set up an iAP2 External Accessory session during link synchronization but did not declare any iAP2 External Accessory session protocols during identification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExternalAccessoryProtocolIdentifierParametersNotUniqueiAP2">ExternalAccessoryProtocolIdentifierParametersNotUniqueiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any ExternalAccessoryProtocolIdentifier parameters are duplicated</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a duplicate ExternalAccessoryProtocolIdentifier %hhu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExternalAccessoryProtocolNameParametersNotUniqueiAP2">ExternalAccessoryProtocolNameParametersNotUniqueiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any ExternalAccessoryProtocolName parameters are duplicated</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a duplicate ExternalAccessoryProtocolName %@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExternalAccessoryProtocolNativeTransportComponentIdentifierInvalidiAP2">ExternalAccessoryProtocolNativeTransportComponentIdentifierInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if NativeTransportComponentIdentifier does not match previous declared identifier of a USBHostTransportComponent</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the NativeTransportComponentIdentifier %hu for ExternalAccessoryProtocolIdentifier %hhu does not match a previously declared TransportComponentIdentifier from a USBHostTransportComponent</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExternalAccessorySessionMessagesNotSeenCAiAP2">ExternalAccessorySessionMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if required messages are not seen during the ExternalAccessory test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoExternalAccessoryProtocolParameterWhileIdentifyingCAiAP2">NoExternalAccessoryProtocolParameterWhileIdentifyingCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to identify an EA protocol parameter while identifying in the CA</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not declare any supported external accessory protocols while testing the %1$@/%2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartEAMessageSeenWithoutEADatagramCAiAP2">StartEAMessageSeenWithoutEADatagramCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory receives an StartExternalAccessoryProtocolSession, but did not send an EA datagram</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory received StartExternalAccessoryProtocolSession message but did not send an EA datagram</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBInterfaceDescriptorsIncorrectForEANativeTransportiAP2">USBInterfaceDescriptorsIncorrectForEANativeTransportiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Validate a number of requirements for the USB interface desciptors associated with EA native transport when seeing an ExternalAccessoryProtocol paramter during identification</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>EA native transport USB interface descriptors for protocol %@ failed validation: %@</td>
</tr>
</table>
<br>


<h2>IPodOut</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EnterExitExtendedInterfaceModeInsteadOfSetUIMode">EnterExitExtendedInterfaceModeInsteadOfSetUIMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory uses EnterExtendedInterfaceMode or ExitExtendedInterfaceMode while identified for iPodOut</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (C.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ instead of SetUIMode while identified for iPod Out</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodOutButtonStatusSpacingGreaterThan100ms">IPodOutButtonStatusSpacingGreaterThan100ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the time between two successive iPodOutButtonStatus commands (without an intervening all-buttons-up packet) is greater than 100 ms. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>more than 100 ms have elapsed since the last iPodOutButtonStatus command without sending another</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodOutRequiredCommandsNotSeenCA">IPodOutRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the iPodOut test if an iPodOutButtonStatus command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands were not seen during the iPod Out test</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodOutSimpleRemoteCommandWithoutiPodOutMode">IPodOutSimpleRemoteCommandWithoutiPodOutMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends any iPod Out Simple Remote command, such as iPodOutButtonStatus or RotationInputStatus, without first entering iPod Out mode via SetUIMode.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.12)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an iPod Out command without first entering iPod Out mode via SetUIMode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdenticalRotationInputStatusSpacingLessThan30ms">IdenticalRotationInputStatusSpacingLessThan30ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the time between two successive identical RotationInputStatus commands is less  than 30 ms. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.12)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent identical RotationInputStatus commands less than 30 ms apart (actual %1$llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdenticaliPodOutButtonStatusSpacingLessThan30ms">IdenticaliPodOutButtonStatusSpacingLessThan30ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the time between two successive identical iPodOutButtonStatus commands is less  than 30 ms. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent identical iPodOutButtonStatus commands within 30 ms of each other</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LineOutPrefNotSetDuringIDPSForiPodOut">LineOutPrefNotSetDuringIDPSForiPodOut</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not set its line out preference during IDPS but identified for iPod Out lingo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.12)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to enter iPod Out mode but did not send an iPodPreferenceToken with its Line Out preference during IDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RestrictedCommandWhileIniPodOutMode">RestrictedCommandWhileIniPodOutMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Only a subset of SimpleRemote and DisplayRemoteCommands are allowed while in iPodOutMode. This rule will fire an error when a command outside of that subset is sent.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 1-16)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory cannot send %1$@ lingo %2$@ command while in iPod Out mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RestrictedContextButtonStatusWhileIniPodOutMode">RestrictedContextButtonStatusWhileIniPodOutMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The accessory is only allowed to use a subset of the ContextButtonStatus states while in iPod Out mode,  so this rule will throw an error if the accessory uses a restricted ContextButtonStatus state.  (See section "Supported Simple Remote and Display Remote Commands" R42, p.60).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 1-16)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent restricted button state in ContextButtonStatus while in iPod Out mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RotationInputStatusSpacingGreaterThan100ms">RotationInputStatusSpacingGreaterThan100ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the time between two successive RotationInputStatus commands (without an intervening Rotation action completed packet) is greater than 100 ms. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.12)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>more than 100 ms have elapsed since the last RotationInputStatus command without sending another</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ScreenInfoTokenDeprecated">ScreenInfoTokenDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends the deprecated ScreenInfoToken</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>ScreenInfoToken is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="TestPatternProhibitedInProductionFirmware">TestPatternProhibitedInProductionFirmware</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error whenever seeing a request to enable the test pattern. This is because we do not want the request for the test pattern ever making it into production firmware.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-262)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>The iPod Out test pattern is acceptable to be used only during development. Do not request it in production firmware.</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoMonitorAspectRatioNotFullscreenWhenEnteringiPodOutMode">VideoMonitorAspectRatioNotFullscreenWhenEnteringiPodOutMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sets the video monitor aspect ratio preference to something other than fullscreen (4:3 aspect ratio) via SetiPodPreferences before entering iPod Out mode via SetUIMode. rdar://problem/11992600 Vet VideoMonitorAspectRatioNotFullscreenWhenEnteringiPodOutMode</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>recommend setting video monitor aspect ratio to 4:3 (fullscreen) before entering iPod Out mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutConnectionPrefNotSetDuringIDPSForiPodOut">VideoOutConnectionPrefNotSetDuringIDPSForiPodOut</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies for iPod Out lingo but does not set its Video Out Connection preference using an iPodPreferenceToken during IDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.12.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to enter iPod Out mode but did not send an iPodPreferenceToken with its Video Out Connection preference during IDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutNotTurnedOnDuringIDPSForiPodOut">VideoOutNotTurnedOnDuringIDPSForiPodOut</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies for iPod Out lingo but does not turn on video out using an iPodPreferenceToken during IDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.12.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to enter iPod Out mode but did not turn on video out using an iPodPreferenceToken during IDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoSignalFormatNotNTSCWhenEnteringiPodOutMode">VideoSignalFormatNotNTSCWhenEnteringiPodOutMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sets the video signal format preference to something other than NTSC via SetiPodPreferences before entering iPod Out mode via SetUIMode. rdar://problem/11992603 Vet VideoSignalFormatNotNTSCWhenEnteringiPodOutMode</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.12)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>recommend setting video signal format to NTSC before entering iPod Out mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoSignalFormatPrefNotSetDuringIDPSForiPodOut">VideoSignalFormatPrefNotSetDuringIDPSForiPodOut</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies for iPod Out lingo but does not set its Video Signal Format preference using an iPodPreferenceToken during IDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.12)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to enter iPod Out mode but did not send an iPodPreferenceToken with its Video Signal Format preference during IDPS</td>
</tr>
</table>
<br>


<h2>StorageLingoAccessory</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FileWriteBeforeOpen">FileWriteBeforeOpen</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if WriteiPodFileData is used before OpeniPodFeatureFile is sent.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.11.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent WriteiPodFileData without sending OpeniPodFeatureFile first</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SecondOpeniPodFeatureFileWithoutCloseiPodFile">SecondOpeniPodFeatureFileWithoutCloseiPodFile</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if two Storage Lingo OpeniPodFeatureFile commands of the same type are sent without an intervening CloseiPodFile or negative iPodAck.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.11.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory called OpeniPodFeatureFile of the same feature type twice without an intervening CloseiPodFile or negative iPodAck</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StorageRequiredCommandsNotSeenCA">StorageRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Storage test if a required Storage command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Storage test were not seen</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WriteBeforeOpeniPodFeatureFileACK">WriteBeforeOpeniPodFeatureFileACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory tries to write to a file before OpeniPodFeatureFile is ACKed.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.11.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent WriteiPodFileData without waiting for ACK from OpeniPodFeatureFile</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WriteToWrongFileHandle">WriteToWrongFileHandle</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory tries to write to a file handle other than the one provided by OpeniPodFeatureFile.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.11.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to write to a file handle other than the one returned by RetiPodFileHandle</td>
</tr>
</table>
<br>


<h2>VoiceOveriAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverMessagesNotSeenCAiAP2">VoiceOverMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to send mandatory messages during the VoiceOver test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverOptionalMessagesNotSeenCAiAP2">VoiceOverOptionalMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if optional but supported messages are not seen during the VoiceOver test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see supported message%2$@ %1$@ while testing the %3$@ feature</td>
</tr>
</table>
<br>


<h2>USBChargingPowerSource</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetAvailableCurrentNotSentAfterAuth">SetAvailableCurrentNotSentAfterAuth</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This CA-only rule thows an error if the accessory does not send a SetAvailableCurrent command 1 second after authentication completes successfully.  (Currently only enabled for USB Host Mode accessories). See rdar://problem/10011965 - Rules: Require use of SetAvailableCurrent over D+/D- resistors and USB Vendor Request when iAP is in use</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 33)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send SetAvailableCurrent within 1 second after authentication completes</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetAvailableCurrentValueIncorrectForSupportedAppleDevicesCA">SetAvailableCurrentValueIncorrectForSupportedAppleDevicesCA</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This CA-only rule fires an error if the accessory sends a SetAvailableCurrent command with a value of less than 1000 mA when an iPod or iPhone is supported by the ProductPlan or less than 2100 mA when an iPad is supported by the ProductPlan</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 33)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent SetAvailableCurrent with a value of %hu mA, but the accessory's claims indicate support for devices requiring at least %hu mA</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBChargingPowerSourceType500mADeprecated30Pin">USBChargingPowerSourceType500mADeprecated30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory identifies itself as a 500mA charger using the D+/- resistor networks.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory presented D+ and D- resistors of the deprecated 500 mA charger</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDMinusDrivenWithoutUSBVbus30Pin">USBDMinusDrivenWithoutUSBVbus30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory drives USB D- but does not drive USB Vbus.  It will fire every time the value of D- changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 30)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is not driving USB Vbus, but the accessory's claims indicate that it should drive USB Vbus</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDMinusResistorIncorrectFor1A30Pin">USBDMinusResistorIncorrectFor1A30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not present a correct resistor for D- for a claimed 1 A USB Vbus power source.  It will fire every time the value of D- changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented an incorrect D- resistor value for the 1 A USB Vbus power source claims selection</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDMinusResistorIncorrectFor2Point1A30Pin">USBDMinusResistorIncorrectFor2Point1A30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not present a correct resistor for D- for a claimed 2.1 A USB Vbus power source.  It will fire every time the value of D- changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented an incorrect D- resistor value for the 2.1 A USB Vbus power source claims selection</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDMinusResistorIncorrectFor500mA30Pin">USBDMinusResistorIncorrectFor500mA30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not present a correct resistor for D- for a claimed 500 mA USB Vbus power source.  It will fire every time the value of D- changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented an incorrect D- resistor value for the 500 mA USB Vbus power source claims selection</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDPlusDrivenWithoutUSBVbus30Pin">USBDPlusDrivenWithoutUSBVbus30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory drives USB D+ but does not drive USB Vbus.  It will fire everytime the value of D+ changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 30)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is not driving USB Vbus, but the accessory's claims indicate that it should drive USB Vbus</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDPlusResistorIncorrectFor1A30Pin">USBDPlusResistorIncorrectFor1A30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not present a correct resistor for D+ for a claimed 1 A USB Vbus power source.  It will fire every time the value of D+ changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented an incorrect D+ resistor value for the 1 A USB Vbus power source claims selection</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDPlusResistorIncorrectFor2Point1A30Pin">USBDPlusResistorIncorrectFor2Point1A30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not present a correct resistor for D+ for a claimed 2.1 A USB Vbus power source.  It will fire every time the value of D+ changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented an incorrect D+ resistor value for the 2.1 A USB Vbus power source claims selection</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDPlusResistorIncorrectFor500mA30Pin">USBDPlusResistorIncorrectFor500mA30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not present a correct resistor for D+ for a claimed 500 mA USB Vbus Power Source.  It will fire every time the value of D+ changes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented an incorrect D+ resistor value for the 500 mA USB Vbus power source claims selection</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBVbusVoltageAtAcceptableLevelDuringLoadTest30Pin">USBVbusVoltageAtAcceptableLevelDuringLoadTest30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule outputs an informational message if the accessory Vbus voltage is at an acceptable level during a USB Vbus load test.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Information:</td>
<td>accessory is driving USB Vbus voltage at an acceptable level of %1$1.2lf V while under load</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBVbusVoltageReturnedToAcceptableLevel30Pin">USBVbusVoltageReturnedToAcceptableLevel30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule prints an informational message when the USB Vbus voltage returns to an acceptable level between 4.745 V and 5.255 V  after momentarily being low or high.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 32)</td>
</tr>
<tr>
<td valign="top" align="right">Information:</td>
<td>&lt;USB Vbus voltage returned to an acceptable level (measured as %1$.2lf V)&gt;</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBVbusVoltageTooHigh30Pin">USBVbusVoltageTooHigh30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory drives USB Vbus to a value greater than 5.255 V.  It will fire every time the value of Vbus changes. If the accessory returns Vbus to within spec, an informative message will be displayed. Note: this threshold value is derived from the general USB spec which requires Vbus voltage to be within +/- 5% of 5 V.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 32)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is driving USB Vbus voltage too high (measured as %1$.2lf V, threshold is 5.25 V)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBVbusVoltageTooLow30Pin">USBVbusVoltageTooLow30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory drives USB Vbus to a value less than 4.70 V for 500mA and 1A chargers and less than 4.55 V for 2.1A chargers (this includes both brick chargers and accessories which speak iAP over serial and use SetAvailableCurrent). For iAP over USB accessories which drive USB Vbus, the threshold is set to 4.90 V for both 1A and 2.1A accessories. It will fire the first time Vbus drops below the threshold. Note: For iAP over USB accessories, the hardware rule engine has no way of determining if the accessory is a 1A charger or a 2.1A charger so we default to the lower threshold of 4.90V.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 32)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory is driving USB Vbus voltage too low (measured as %1$.2lf V, threshold is %2$.2f V)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBVbusVoltageTooLowDuringLoadTest30Pin">USBVbusVoltageTooLowDuringLoadTest30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory Vbus voltage drops below the required threshold during a USB Vbus load test.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 31)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is driving USB Vbus voltage too low while under load (measured as %1$1.2lf V, threshold is %2$1.2lf V)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBVbusVoltageTooLowExtended30Pin">USBVbusVoltageTooLowExtended30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule will throw an error if the accessory remains in the USBVbusVoltageTooLow30Pin state for more than 5 seconds. See USBVbusVoltageTooLow30Pin description for more details on the particular state.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 32)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory has been driving USB Vbus voltage too low for more than 5 seconds (measured as %1$.2lf V, threshold is %2$.2lf V)</td>
</tr>
</table>
<br>


<h2>NowPlayingiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NowPlaying3rdPartyAppNotSeenCAiAP2">NowPlaying3rdPartyAppNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if NowPlaying updates haven't been seen from at least one 3rd party app</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see NowPlayingUpdate messages with PlaybackAppBundleID for any 3rd party app while testing the %1$@ feature%2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NowPlayingAppleAppsNotSeenCAiAP2">NowPlayingAppleAppsNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if NowPlaying updates haven't been seen from all Apple-developed iOS apps</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see NowPlayingUpdate messages with PlaybackAppBundleID for %1$@ while testing the %2$@ feature%3$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NowPlayingMessagesNotSeenCAiAP2">NowPlayingMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to send mandatory messages during the NowPlaying test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>


<h2>Authentication</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthenticationV2BadIDLDeviceID">AuthenticationV2BadIDLDeviceID</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the wrong device ID is seen for authentication V2. rdar://problem/11942362 Vet AuthenticationV2BadIDLDeviceID</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent IdentifyDeviceLingoes with wrong device ID for V2 authentication</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthenticationV2Timeout150s">AuthenticationV2Timeout150s</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if authentication times out.  The spec allows 2 retries with a maximum 150 seconds for both retries. We will not count retries here, but just measure the time from the first V2 IDL to the first successful L00_AckAccessoryAuthenticationStatus. This will also be cancelled by a Bad Parameter ACK to the IDL, in the event that the iPod doesn't support authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory started authentication but did not complete the process successfully within 150 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DeviceIDNotZeroOrTwoHundred">DeviceIDNotZeroOrTwoHundred</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory declares a device ID other than 0x00 or 0x0200 rdar://problem/11942374 Vet DeviceIDNotZeroOrTwoHundred</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>invalid accessory device id 0x%1$x</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DidNotWaitAfterAuthenticationFailed">DidNotWaitAfterAuthenticationFailed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws and error if the accessory does not waith at least 5 seconds after authentication  fails before sending StartIDPS or IDL again. See radar rdar://problem/9725508.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.3)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must wait at least 5 seconds after authentication fails before retrying the identification process</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryAuthInfoNotV2">RetAccessoryAuthInfoNotV2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if RetAccessoryAuthenticationInfo uses anything other than Auth 2.0</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not use authentication v2</td>
</tr>
</table>
<br>


<h2>MisciAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FileTransferSessionDuringLinkSynchronizationWithoutiAP2FileTransferSessionMessagesDuringIdentificationiAP2">FileTransferSessionDuringLinkSynchronizationWithoutiAP2FileTransferSessionMessagesDuringIdentificationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory declares File Transfer Session but do not identifiy it during the identification.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set up an iAP2 File Transfer session during link synchronization but did not declare any iAP2 File Transfer messages during identification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FileTransferWithoutFileTransferSessioniAP2">FileTransferWithoutFileTransferSessioniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory requests a file transfer but did not negotiate a file transfer session</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory requested a file transfer but did not negotiate a file transfer session during link synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Measured55Or5ABaudRateOutOfRange8PiniAP2">Measured55Or5ABaudRateOutOfRange8PiniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0 (External Only)</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends a packet with a 0x55 or 0x5A baud rate outside of 57600 +/-2%.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory baud rate of %u bps (as measured by the 0x55 or 0x5A byte) is outside of the acceptable range (57600 bps +/- 2 percent)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartFileTransferMessageSeenWithoutFileTransferDatagramCAiAP2">StartFileTransferMessageSeenWithoutFileTransferDatagramCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory sends start File Transfer Messages without sending any File Transfer Datagram during the CA</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an iAP message to initiate a file transfer, but no file transfer datagrams were seen during the Certification Assistant test</td>
</tr>
</table>
<br>


<h2>USBHostMode</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DeprecatedRoleSwitchSeen">DeprecatedRoleSwitchSeen</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 4.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire a warning if the accessory uses the deprecated role swap (0x50) command.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory used deprecated USB role switch</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DigitalAudioLingoInUSBHostMode30Pin">DigitalAudioLingoInUSBHostMode30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory trys to use the Digital Audio lingo while the Apple device is in USB Host Mode. (see p.57 of HWSpec_R6_101029)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory cannot use the Digital Audio lingo in USB Host Mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoNotifyUSBModeDevACKWithin500ms">NoNotifyUSBModeDevACKWithin500ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to NotifyUSBMode with a DevACK within 500 ms. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.6.3)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to NotifyUSBMode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBAudioAccCapWhenNotInUSBDeviceMode30Pin">USBAudioAccCapWhenNotInUSBDeviceMode30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory trys to set the USB audio AccCap bit (0x04) when the Apple device is not in USB Device Mode. (Accessories with a USB Audio Class Interface [that work with an iOS device in USB Host Mode] do not need to set this bit)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-71)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>USB audio bit was set in AccessoryCapsToken when Apple device is not in USB Device Mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostModeInterruptInEndpointOptional">USBHostModeInterruptInEndpointOptional</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The Interrupt In endpoint is not used and has been removed from the spec as per rdar://problem/14564578 Update USB Host Mode requirements to make the interrupt IN endpoint optional This rule will warn developers of the change</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>interrupt IN endpoint is deprecated for the USB Host Mode iAP Interface</td>
</tr>
</table>
<br>


<h2>HardwareCommon</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccTxVoltageLogicHighTooHigh30Pin">AccTxVoltageLogicHighTooHigh30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory's Tx-to-iPod (pin 18) logic-high voltage is above 3.465 V.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 51)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory Tx-to-iPod (pin 18) is (%1$.2lf V), higher than the maximum allowed logic high voltage of 3.465 V.</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryInvalidConnectionLightningTo30PinAdapter8Pin">AccessoryInvalidConnectionLightningTo30PinAdapter8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if connect a Lightning to 30-pin Adapter to the accessory side of the ATS Lightning Box.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>%1$@ was connected to the accessory side of the ATS Lightning Box</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryInvalidConnectionOrientation8Pin">AccessoryInvalidConnectionOrientation8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory is connected in the wrong orientation</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory was attached in the incorrect orientation</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Baud55Not19200Or5760030Pin">Baud55Not19200Or5760030Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a packet with a 0x55 baud rate outside of 19200 or 57600 +/-2%.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 52)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory baud rate of %u bps (as measured by the 0x55 byte) is outside of the acceptable range (19200 or 57600 bps +/- 2 percent)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="BaudFFNot19200Or5760030Pin">BaudFFNot19200Or5760030Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a packet with a 0xFF baud rate outside of 19200 +/- 2% or 57600 +/- 2%.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 52)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory baud rate of %u bps (as measured by the 0xFF byte) is outside of the acceptable range (19200 or 57600 bps +/- 2 percent)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DeprecatedFireWirePowerPresent30Pin">DeprecatedFireWirePowerPresent30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory applies non-zero FireWire voltage to pin 11 or pin 12.  (The actual test value  is about 0.5 V to allow for some measurement error.) Note: Need to update in Future to allow DisplayPort accessories to drive these pins. (stripped from 1.5)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 19)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the accessory drives FireWire pins, which is not allowed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevicePowerVoltageTooLowExtended8Pin">DevicePowerVoltageTooLowExtended8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if voltage remains too low for 5 seconds. Timeout begins when voltage initially goes too low, and cancels if voltage goes to an acceptable state</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory has been driving device power voltage too low for more than 5 seconds (measured as %1$.2lf V, threshold is %2$.2lf V)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevicePowerVoltageTooLowLoadTest8Pin">DevicePowerVoltageTooLowLoadTest8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if voltage goes too low from not being too low in the previous measurement (eg. doesn't re-throw for multiple too-low measurements)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is driving device power voltage too low (measured as %1$.2lf V, threshold is %2$.2f V)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LightningModuleConfigurationDeprecated8Pin">LightningModuleConfigurationDeprecated8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.9</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the detected Lightning module configuration is deprecated.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory's embedded Lightning module configuration \"%1$@\" is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MeasuredFFBaudRateOutOfRange8Pin">MeasuredFFBaudRateOutOfRange8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0 (External Only)</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends a packet with a 0xFF baud rate outside of 57600 +/-2%.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory baud rate of %u bps (as measured by the 0xFF byte) is outside of the acceptable range (57600 bps +/- 2 percent)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResistorsIncorrectForClaimedCurrentCA8Pin">ResistorsIncorrectForClaimedCurrentCA8Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if accessory that does not speak iAP presents resistors that do not match those expected for the claimed current</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is presenting the incorrect D+/D- values for the %1$@ claim selection</td>
</tr>
</table>
<br>


<h2>VideoOutAccessory</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoSetOrCheckiPodPreferencesVideoBeforeVideoOutEnabled">NoSetOrCheckiPodPreferencesVideoBeforeVideoOutEnabled</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if an accessory turns on video out without first checking or setting video preferences. This is meant to catch accessories that don't even bother checking the video settings (which might have sensible defaults) before turning video on. Notes: Updated with IDPS support</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.34)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory attempted to turn on video out without setting or checking required video preferences first</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutRequiredCommandsNotSeenCA">VideoOutRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Video Out test if a required Video Out command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Video Out test were not seen</td>
</tr>
</table>
<br>


<h2>USBHIDReport</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryHIDReportNotDevACKed">AccessoryHIDReportNotDevACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to send DevACK in response to AccessoryHIDReport within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.17)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to respond to AccessoryHIDReport with an AccessoryAck within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ClosedDescriptorInUnregisterDescriptor">ClosedDescriptorInUnregisterDescriptor</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends UnregisterDescriptor with a descriptor index that has already been unregistered.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.18)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent UnregisterDescriptor with a descriptor index that has already been unregistered</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodHIDReportBeforeRegisterDescriptorACKed">IPodHIDReportBeforeRegisterDescriptorACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends iPodHIDReport before RegisterDescriptor is successfully ACKed by the iPod.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.15)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iPodHIDReport before receiving an iPodAck for RegisterDescriptor with descriptor index %1$u</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RegisterDescriptorHasAppleVID">RegisterDescriptorHasAppleVID</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0 (External Only)</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if an accessory sends RegisterDescriptor with an Apple VID.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.15)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>VID %1$hu (0x%1$04X) is reserved for Apple accessories</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnknownDescriptorInUnregisterDescriptor">UnknownDescriptorInUnregisterDescriptor</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends UnregisterDescriptor with a descriptor index that does not match a descriptor index sent in RegisterDescriptor.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.18)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent UnregisterDescriptor with an unknown descriptor index</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnknownDescriptorIniPodHIDReport">UnknownDescriptorIniPodHIDReport</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends iPodHIDReport with a descriptor index that does not match a descriptor index sent in RegisterDescriptor.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.15)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iPodHIDReport with an unregistered descriptor index</td>
</tr>
</table>
<br>


<h2>AuthenticationiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryAuthenticationCertificateSerialUnparsableiAP2">AccessoryAuthenticationCertificateSerialUnparsableiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires an error when the cert serial number value in the certificate is unparsable, which indirectly means that the certificate is also unparsable.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent unparsable certificate information</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthenticationCertificateTimeoutiAP2">AuthenticationCertificateTimeoutiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if AuthenticationCertificate is not seen within 1 second of receiving RequestAuthenticationCertificate</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send AuthenticationCertificate within 1 second of receiving RequestAuthenticationCertificate</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthenticationRequiredMessagesNotSeenCAiAP2">AuthenticationRequiredMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to send mandatory messages during the authentication test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ during the Automatic Tests with Apple device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthenticationResponseTimeoutiAP2">AuthenticationResponseTimeoutiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if AuthenticationResponse is not seen within 2 seconds of receiving RequestAuthenticationChallengeResponse</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send AuthenticationResponse within 2 seconds of receiving RequestAuthenticationChallengeResponse</td>
</tr>
</table>
<br>


<h2>MediaLibraryiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryInformationMessagesNotSeenCAiAP2">MediaLibraryInformationMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if required messages are not seen during the Media Library test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryPlaybackOptionalMessagesNotSeenCAiAP2">MediaLibraryPlaybackOptionalMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if optional but supported messages are not seen during the Media Library test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see supported message%2$@ %1$@ while testing the %3$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryPlaybackUsedWithoutMediaLibraryUpdatesCAiAP2">MediaLibraryPlaybackUsedWithoutMediaLibraryUpdatesCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if media library playback is used when media library updates have not been This rule uses the test ending as a point to check for usage. It doesn't specifically infer that Media Library Playback were used by the test being run</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory used Media Library Playback without using Media Library Updates while testing the %1$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryPlaybackWithoutMediaLibraryUpdatesInDeclarationiAP2">MediaLibraryPlaybackWithoutMediaLibraryUpdatesInDeclarationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during identification if the message list includes Media Library Playback-related messages without including Media Library Updates messages</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory declared support for MediaLibraryPlayback messages without declaring support for MediaLibraryUpdates message%1$@: %2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryUpdatesMessagesNotSeenCAiAP2">MediaLibraryUpdatesMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if required messages are not seen during the Media Library test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryUpdatesUsedWithoutMediaLibraryInformationCAiAP2">MediaLibraryUpdatesUsedWithoutMediaLibraryInformationCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if media library updates are used when media library information has not been This rule uses the test ending as a point to check for usage. It doesn't specifically infer that Media Library Updates were used by the test being run</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory used Media Library Updates without using Media Library Information while testing the %1$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MediaLibraryUpdatesWithoutMediaLibraryInformationInDeclarationiAP2">MediaLibraryUpdatesWithoutMediaLibraryInformationInDeclarationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during identification if the message list includes Media Library Updates-related messages without including Media Library Information messages</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory declared support for MediaLibraryUpdates messages without declaring support for MediaLibraryInformation messages</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartMediaLibraryUpdatesWithoutCorrectLastKnownRevisioniAP2">StartMediaLibraryUpdatesWithoutCorrectLastKnownRevisioniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a StartMediaLibraryUpdates is seen without a recent MediaLibraryRevision</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory's last known media library revision is not from a recent update</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartSecondMediaLibraryUpdatesWithoutLastKnownRevisioniAP2">StartSecondMediaLibraryUpdatesWithoutLastKnownRevisioniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.9</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a second StartMediaLibraryUpdates is seen without a LastKnownMediaLibraryRevision parameter</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory requested a full database update more than once in a single iAP2 session</td>
</tr>
</table>
<br>


<h2>AccessoryIdentifyResistor</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommandsFromDeviceWithResistor360k30Pin">CommandsFromDeviceWithResistor360k30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an an accessory that claims an ID resistor of 360k sends any iAP commands.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 115)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessories that claim a 360 k ID resistor may not send iAP commands</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyiAPButiAPResistorPresented30Pin">NoTimelyiAPButiAPResistorPresented30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory uses an ID resistor claming iAP without identifying within 2 seconds</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not identify within 2 seconds of indicating support for iAP by presenting a %1$@ ID resistor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResistorIDNotValid30Pin">ResistorIDNotValid30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule generically checks for resistor values that are within +/- 2% of one of the valid ID resistor values.   This rule should NOT run while the CA is running, as claim validation rules will take priority.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>%@ is not a valid resistor ID</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResistorPresentButNot191k30Pin">ResistorPresentButNot191k30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an ID resistor outside of 191k (+/-2%) is seen, but this value is claimed.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented a %@ ID resistor, but the accessory's claims indicate a 191 k ID resistor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResistorPresentButNot255kOrNone30Pin">ResistorPresentButNot255kOrNone30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an ID resistor outside of 255k (+/-2%) is seen, but this value is claimed. In 2.2, this rule was modified to also allow no ID resistor, because the claims will only tell us that the accessory supplies USB power and uses no iAP transport.  These accessories are allowed to have either 255k or none. See radar 10176734 Update 255k Rules to Allow No Resistor radar 10230898 No way to claim 255 k resistor in test mode</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented a %@ ID resistor, but the accessory's claims indicate it should have either a 255 k ID resistor or no ID resistor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResistorPresentButNot28k30Pin">ResistorPresentButNot28k30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an ID resistor outside of 28k (+/-2%) is seen, but this value is claimed.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented a %@ ID resistor, but the accessory's claims indicate a 28 k ID resistor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResistorPresentButNot549k30Pin">ResistorPresentButNot549k30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an ID resistor outside of 549k (+/-2%) is seen, but this value is claimed.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory presented a %@ ID resistor, but the accessory's claims indicate a 549 k ID resistor</td>
</tr>
</table>
<br>


<h2>USBDeviceModeAudioiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBDeviceModeAudioMessagesNotSeenCAiAP2">USBDeviceModeAudioMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to send mandatory messages during the USB Device Mode Audio test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>


<h2>AppLaunchiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AppLaunchRequiredMessagesNotSeenCAiAP2">AppLaunchRequiredMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any of the mandatory messages are not seen during the test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see required messages while testing the %1$@ feature</td>
</tr>
</table>
<br>


<h2>GymEquipment</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoGetiPodCapsForGymEquipment">NoGetiPodCapsForGymEquipment</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if Sports Lingo GetiPodCaps is not sent before sending OpeniPodFeatureFile for a workout from  Storage Lingo, or GetUserIndex, GetUserData, or SetUserData from Sports Lingo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (B.1.5.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to send Sports lingo GetiPodCaps before sending OpeniPodFeatureFile for a workout from Storage lingo, or GetUserIndex, GetUserData, or SetUserData from Sports lingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRetAccessoryCapsForGymEquipment">NoRetAccessoryCapsForGymEquipment</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send a RetAccessoryCaps with bit 9 in its capsMask set in response to a  GetAccessoryCaps request.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.9.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>Sports lingo accessory sending RetAccessoryCaps without bit 9 in capsMask turned on</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRetiPodCapsForGymEquipment">NoRetiPodCapsForGymEquipment</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if Sports Lingo RetiPodCaps is not received before sending OpeniPodFeatureFile for a workout from  Storage Lingo, or GetUserIndex, GetUserData, or SetUserData from Sports Lingo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (B.1.5.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to receive Sports lingo RetiPodCaps before sending OpeniPodFeatureFile for a workout from Storage Lingo, or GetUserIndex, GetUserData, or SetUserData from Sports lingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SportsLingoRequiredCommandsNotSeenCA">SportsLingoRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Sports Lingo test if a Sports lingo command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands were not seen during the Sports Lingo test</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UserDataCommandSentButUserDataNotSupported">UserDataCommandSentButUserDataNotSupported</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends GetUserIndex, GetUserData, or SetUserData from Sports Lingo, but  the last RetiPodCaps did not advertise support for user data.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.9.9)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a GetUserIndex, GetUserData, or SetUserData command, but the iPod did not indicate support for user data in its last RetiPodCaps</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WorkoutFeatureDeprecated">WorkoutFeatureDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory uses the workout feature</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.16)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>workout feature is deprecated</td>
</tr>
</table>
<br>


<h2>BluetoothiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="BluetoothComponentInformationComponentIdentifierInvalidiAP2">BluetoothComponentInformationComponentIdentifierInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the ComponentIdentifier parameter is unknown in BluetoothComponentInformation</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent BluetoothComponentInformation with an unknown ComponentIdentifier</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="BluetoothComponentInformationMissingComponentiAP2">BluetoothComponentInformationMissingComponentiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if component information isn't provided for all declared components Backing:  "The accessory must report status for every identified Bluetooth component and not just for the changed component"</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not report status of all identified Bluetooth transport components</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="BluetoothComponentInformationNoNewInformationiAP2">BluetoothComponentInformationNoNewInformationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if component information status update is identical to the previous status without any new information</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory reported Bluetooth transport component status with no status change</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="BluetoothRequiredMessagesNotSeenCAiAP2">BluetoothRequiredMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any of the mandatory messages are not seen during the test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoBluetoothComponentAfterIdentificationiAP2">NoBluetoothComponentAfterIdentificationiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a bluetooth component isn't identified for 2 seconds after identification Backing: "The accessory must send an initial BluetoothComponentInformation message within 2 seconds of receiving an IdentifiationAccepted message."</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not immediately send BluetoothComponentInformation</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoBluetoothIdentificationCAiAP2">NoBluetoothIdentificationCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if no Bluetooth components are identified during identification</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not declare any Bluetooth components while testing the %1$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartBluetoothConnectionUpdatesBluetoothTransportComponentIdentifierInvalidiAP2">StartBluetoothConnectionUpdatesBluetoothTransportComponentIdentifierInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the BluetoothTransportComponentIdentifier parameter is unknown in StartBluetoothConnectionUpdates</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartBluetoothConnectionUpdates with an unknown BluetoothTransportComponentIdentifier</td>
</tr>
</table>
<br>


<h2>RFTuner</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="HDRadioCommandWithoutHDCapableBit">HDRadioCommandWithoutHDCapableBit</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>throw an error if the accessory sends RetHDProgramServiceCount without setting the HD capable bit in the previous RetTunerCaps command throw an error if the accessory sends RetHDProgramService without setting the HD capable bit in the previous RetTunerCaps command throw an error if the accessory sends RetHDDataReadStatus without setting the HD capable bit in the previous RetTunerCaps command throw an error if the accessory sends RetHDData without setting the HD capable bit in the previous RetTunerCaps command throw an error if the accessory sends RetHDDataNotifyMask without setting the HD capable bit in the previous RetTunerCaps command</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an HD radio command without setting the HD capable bit in the previous RetTunerCaps command</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetHDData">NoResponseToGetHDData</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>throw an error if the accessory doesnt respond to GetHDData with RetHDData or NACK within 500 ms Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.46)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetHDData with transaction ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetHDDataNotifyMask">NoResponseToGetHDDataNotifyMask</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>throw an error if the accessory doesnt respond to GetHDDataNotifyMask with RetHDDataNotifyMask or NACK within 500 ms Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetHDDataNotifyMask with transaction ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetHDDataReadyStatus">NoResponseToGetHDDataReadyStatus</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>throw an error if the accessory doesnt respond to GetHDDataReadyStatus with RetHDDataReadyStatus or NACK within 500 ms Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.44)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetHDDataReadyStatus with transaction ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetHDProgramService">NoResponseToGetHDProgramService</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>throw an error if the accessory doesnt respond to GetHDPRogramService with RetHDProgramService or NACK within 500 ms Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetHDProgramService with transaction ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetHDProgramServiceCount">NoResponseToGetHDProgramServiceCount</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>throw an error if the accessory doesnt respond to GetHDProgramServiceCount with RetHDProgramServiceCount or NACK within 500 ms</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.39)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetHDProgramServiceCount with transaction ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RFTunerRequestTimedOut">RFTunerRequestTimedOut</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an RFTuner command takes too long to respond</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory exceeded response timeout of %1$d ms for command %2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResponseToGetTunerFreqGreaterThan200ms">ResponseToGetTunerFreqGreaterThan200ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory doesn't send a RetTunerFreq within 200 ms of GetTunerFreq.   Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.15)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 200 ms to GetTunerFreq with transaction ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ResponseToSetTunerFreqGreaterThan200ms">ResponseToSetTunerFreqGreaterThan200ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory doesn't send a RetTunerFreq within 200 ms of SetTunerFreq.   Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.7.15)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 200 ms to SetTunerFreq with transaction ID %1$hu</td>
</tr>
</table>
<br>


<h2>Location</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AsyncAccessoryDataLocationTypeNotSupportedByAcc">AsyncAccessoryDataLocationTypeNotSupportedByAcc</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData command with a location type that does not match the  types supported in the accessory's last RetAccessoryCaps of location type "System".</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AsyncAccessoryData with a location type that does not match the types supported in the last RetAccessoryCaps of location type 'System'</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AsyncAccessoryDataSentWithoutWaitingForiPodACK">AsyncAccessoryDataSentWithoutWaitingForiPodACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends data to the iPod using AsyncAccessoryData while previous data that has been sent has not been ACKed with an iPodACK and has not yet timed out.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AsyncAccessoryData without first waiting for iPodAck from a previous AsyncAccessoryData or sending an AccessoryAck with 'Command Timeout' status</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CurrentGPSTimeSentTooFrequently">CurrentGPSTimeSentTooFrequently</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends GPS time (using AsyncAccessoryData with locType=LocAssist and dataType=GpsTime) more frequently than once every 5 minutes. rdar://problem/11979549 Vet CurrentGPSTimeSentTooFrequently</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent GPS time more frequently than once every 5 minutes</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevACKCommandOKReturnedForOtherThanLastSection">DevACKCommandOKReturnedForOtherThanLastSection</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AccessoryAck with command OK response to a multisection SetAccessoryData data  transfer that is not the last data section instead of sending an AccessoryAck with a status of "section received OK" and the  received section index.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory responded to a multisection SetAccessoryData command with an AccessoryAck with status 'Command OK' instead of 'Section Received OK' for a section other than the last section</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevACKSectionReceivedReturnedForLastSection">DevACKSectionReceivedReturnedForLastSection</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a DevACK with a "section received OK" status in response to the last section of a multisection SetAccessoryData data transfer instead of a DevACK with a status of "command OK".</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent 'Section received' AccessoryAck in response to final section of a multisection SetAccessoryData command</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevACKWithSectionReceivedOKStatusDuplicateSectionIndex">DevACKWithSectionReceivedOKStatusDuplicateSectionIndex</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a DevACK with a status of "section received OK" with duplicate  section index of a multisection SetAccessoryData data transfer.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent 'section received' AccessoryAck for a SetAccessoryData section index (%1$d) it already ACKed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LocationLingoRequiredCommandsNotSeenCA">LocationLingoRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Location Lingo test if a Location lingo command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Location Lingo test were not seen</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionAsyncAccessoryDataLocationDataTypeMismatch">MultisectionAsyncAccessoryDataLocationDataTypeMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData as part of a multisection transfer with matching  transaction ID but a different data location type than the first AsyncAccessoryData of the transfer.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an AsyncAccessoryData as part of a multisection transfer with a different location data type than the first section</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionAsyncAccessoryDataLocationTypeMismatch">MultisectionAsyncAccessoryDataLocationTypeMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData as part of a multisection transfer with matching  transaction ID but a different location type than the first AsyncAccessoryData of the transfer.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an AsyncAccessoryData as part of a multisection transfer with a different location type than the first section</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionAsyncAccessoryDataWithDataSectionIndexOutOfRange">MultisectionAsyncAccessoryDataWithDataSectionIndexOutOfRange</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData as part of a multisection transfer whose data section  index is greater than the maximum data section index.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an AsyncAccessoryData as part of a multisection transfer with an out of range data section index</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionAsyncAccessoryDataWithEmptyPayload">MultisectionAsyncAccessoryDataWithEmptyPayload</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData as part of a multisection transfer with an empty data payload.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AsyncAccessoryData section with an empty data payload</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionAsyncAccessoryDataWithMaximumDataSectionIndexMismatch">MultisectionAsyncAccessoryDataWithMaximumDataSectionIndexMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData as part of a multisection transfer whose maximum data  section index does not match the maximum data section index sent in the first AsyncAccessoryData of the multisection transfer.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AsyncAccessoryData with a different maximum section index than the first AsyncAccessoryData in this transaction</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionAsyncAccessoryDataWithNonSequentialDataSectionIndex">MultisectionAsyncAccessoryDataWithNonSequentialDataSectionIndex</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AsyncAccessoryData as part of a multisection transfer whose data section  index is not 1 more than the data section index of the last received AsyncAccessoryData.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AsyncAccessoryData with a non-sequential current section index from the previous AsyncAccessoryData</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MultisectionSetAccessoryDataValidButEmptyNotACKed">MultisectionSetAccessoryDataValidButEmptyNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send an ACK for a SetAccessoryData command sent as part of a multisection data transfer with an empty data payload, which should be accepted by device if all its other parameters are valid.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send AccessoryAck in response to a valid SetAccessoryData</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MustSetSatEphRequiredBit">MustSetSatEphRequiredBit</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The spec requires that accessories set Bit 01 of locAsstData within RetAccessoryCaps (location assistance) An error should appear when accessories set any of Bit 02 - 04 of locAsstData without setting Bit 01  (satellite ephemeris required) of locAsstData for RetAccessoryCaps. rdar://problem/7039005 Location Claim: Need rule for MustSetSatEphRequiredBit</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-275)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory indicated support with RetAccessoryCaps for a location assistance capability that requires satellite ephemeris data, without setting satellite ephemeris data required</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRetAccessoryCapsForGetAccessoryCapsSystemCaps">NoRetAccessoryCapsForGetAccessoryCapsSystemCaps</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to a request for its system capabilities with a RetAccessoryCaps.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.6)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to a request for its system capabilities with a RetAccessoryCaps</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRetAccessoryCapsReturnedForSupportedLocationType">NoRetAccessoryCapsReturnedForSupportedLocationType</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not return a RetAccessoryCaps response when the iPod requests capabilities for a supported location type.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.6)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send RetAccessoryCaps for supported location type %1$d in response to GetAccessoryCaps</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRetAccessoryControlReturnedForSupportedControlType">NoRetAccessoryControlReturnedForSupportedControlType</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not return a RetAccessoryControl response when the iPod requests  capabilities for a supported control type.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.8)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to a GetAccessoryControl with a RetAccessoryControl</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToGetAccessoryCaps">NoTimelyResponseToGetAccessoryCaps</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to a GetAccessoryCaps request with RetAccessoryCaps or DevACK within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetAccessoryCaps</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToGetAccessoryControl">NoTimelyResponseToGetAccessoryControl</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to a GetAccessoryControl request with RetAccessoryControl or AccessoryACK within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.8)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond within 500 ms to GetAccessoryControl</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToGetAccessoryData">NoTimelyResponseToGetAccessoryData</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to a GetAccessoryData request with a RetAccessoryData or AccessoryACK within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to GetAccessoryData within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToSetAccessoryControl">NoTimelyResponseToSetAccessoryControl</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to a SetAccessoryControl request with an AccessoryAck within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.10)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to SetAccessoryControl with an AccessoryAck within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToSetAccessoryData">NoTimelyResponseToSetAccessoryData</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to a SetAccessoryData request with an AccessoryAck within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.13)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to SetAccessoryData with an AccessoryAck within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryCapsLocAsstDataBits1And2DoNotMatch">RetAccessoryCapsLocAsstDataBits1And2DoNotMatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if RetAccessoryCaps for locAsstData and bits 1 and 2 don't match.  See R42 page 391.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-275)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>locAsstData bits 1 and 2 must match</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryCapsLocationTypeMismatch">RetAccessoryCapsLocationTypeMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a RetAccessoryCaps with the same transaction ID but a different  location type in response to a GetAccessoryCaps request.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.6)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory responded to a GetAccessoryCaps request for location type %1$d with a RetAccessoryCaps with location type %2$d</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryCapsSentWithInvalidLocCapsMask">RetAccessoryCapsSentWithInvalidLocCapsMask</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends RetAccessoryCaps for locType 0, and the locCapsMask has set neither bit 1 nor bit 2.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-275)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent RetAccessoryCaps for type 'system' with an invalid location capabilities bitmask. You must set at least one of bit 1 (NMEA GPS support) and bit 2 (location assistance support)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryControlControlTypeMismatch">RetAccessoryControlControlTypeMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a RetAccessoryControl with the same transaction ID but a different  control type in response to a GetAccessoryControl request.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.8)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory responded to a GetAccessoryControl with a RetAccessoryControl specifying a different control type</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryDataLocationDataTypeMismatch">RetAccessoryDataLocationDataTypeMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory returns a RetAccessoryData response with a matching transaction ID but a different  location data type than iPod sent in the matching GetAccessoryData command.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory responded to GetAccessoryData with RetAccessoryData using a different location data type</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryDataLocationTypeMismatch">RetAccessoryDataLocationTypeMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory replies to a GetAccessoryData with a RetAccessoryData with the same transaction ID but different location type.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory responded to a GetAccessoryData with a RetAccessoryData whose transaction ID matched but location type was different</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryDataSentWithoutWaitingForiPodACK">RetAccessoryDataSentWithoutWaitingForiPodACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends data to the iPod using RetAccessoryData while previous data that has been  sent has not been ACKed with an iPodACK and has not yet timed out.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent RetAccessoryData without first waiting for iPodAck from a previous RetAccessoryData</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SatelliteEphemerisRequestedTooFrequently">SatelliteEphemerisRequestedTooFrequently</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory requests satellite ephemeris data (using AsyncAccessoryData with locType=LocAssist  and dataType=EphURL) more frequently than once every 5 minutes.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory requested satellite ephemeris data more frequently than once every 5 minutes</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnexpectedAsyncAccessoryDataNMEASentence">UnexpectedAsyncAccessoryDataNMEASentence</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends an NMEA sentence (using AsyncAccessoryData with locType=NMEA GPS and  dataType=NmeaSentence) when NMEA GPS async or global async notifications are disabled.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.14)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent NMEA sentence while the Apple device has asynchronous notifications disabled</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnexpectedAsyncAccessoryDataNMEASentenceAfterAccessoryAck">UnexpectedAsyncAccessoryDataNMEASentenceAfterAccessoryAck</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an NMEA sentence (using AsyncAccessoryData with locType=NMEA GPS and dataType=NmeaSentence) when NMEA GPS async or global async notifications are disabled.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.13.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent NMEA sentence while the Apple device has asynchronous notifications disabled and accessory acknowledged that state</td>
</tr>
</table>
<br>


<h2>LocationiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LocationMessagesNotSeenCAiAP2">LocationMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if required Location messages are not seen during the Location test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnwarrantedLocationInformationSentiAP2">UnwarrantedLocationInformationSentiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if location information is sent outside of the apple device's start/stop The rule allows for a 2 millisecond grace period after the stop, since the spec does not specify a time but instead says it must cease</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent location information when the Apple device did not request it</td>
</tr>
</table>
<br>


<h2>IDPS</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccCapsVolumeInfoButNoDisplayRemoteLingoIdentify">AccCapsVolumeInfoButNoDisplayRemoteLingoIdentify</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>rdar://problem/7071291 Rule Request: AccCapsVolumeInfoButNoDisplayRemoteLingoIdentify Rule should fire if the final AccCaps Token indicates support for bit 11 (Volume Information) and the final Identify Token did not indicate display remote lingo (0x03) support AND if EndIDPS was sent expecting success (If it was sent expecting to not continue to auth, this should not fire).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.3)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory indicated support for volume information in AccessoryCapsToken without indicating support for Display Remote lingo in IdentifyToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryCapsTokeniPodPreferenceTokenLineOutMismatch">AccessoryCapsTokeniPodPreferenceTokenLineOutMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets a preference for the line out class via an iPodPreferenceToken  but did not claim line out capability via an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to set line out preferences without specifying line out capability in an AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryCapsTokeniPodPreferenceTokenVideoOutConnectionMismatch">AccessoryCapsTokeniPodPreferenceTokenVideoOutConnectionMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets a preference for the video out connection class via an  iPodPreferenceToken but did not claim video out capability via an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set a preference for video out connection but did not claim video out with AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryCapsTokeniPodPreferenceTokenVideoOutMismatch">AccessoryCapsTokeniPodPreferenceTokenVideoOutMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets a preference for the video out class via an iPodPreferenceToken  but did not claim video out capability via an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set a preference for video out but did not claim video out with AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryCapsTokeniPodPreferenceTokenVideoOutMonitorAspectRatioMismatch">AccessoryCapsTokeniPodPreferenceTokenVideoOutMonitorAspectRatioMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets a preference for the video out monitor aspect ratio class via an  iPodPreferenceToken but did not claim video out capability via an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Section 1.2.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to set video monitor aspect ratio preference without specifying video out in an AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryCapsTokeniPodPreferenceTokenVideoOutSignalFormatMismatch">AccessoryCapsTokeniPodPreferenceTokenVideoOutSignalFormatMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets a preference for the video out signal format class via an  iPodPreferenceToken but did not claim video out capability via an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to set video out signal format preferences without specifying video out capability in an AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AnalogUSBAudioRoutingAccCapWithAVSynchronizationSupported">AnalogUSBAudioRoutingAccCapWithAVSynchronizationSupported</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>If the iPod returns support for the SetVideoDelay command in RetiPodOptionsForLingo for the Digital Audio Lingo then the accessory cannot use AccessoryCapsToken bit 21 because it should be useing SetVideoDelay instead. The test for this rule only runs when the accessory is USB host because only USB host accessories are allowed to set bit 21 in an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must not set AccessoryCapsToken bit 21 since RetiPodOptionsForLingo Digital Audio lingo supports A/V synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AnalogUSBAudioRoutingAccCapWithoutAnalogUSBAudioRoutingSupport">AnalogUSBAudioRoutingAccCapWithoutAnalogUSBAudioRoutingSupport</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>If the iPod does not return support for analog USB audio routing (bit 26) in RetiPodOptionsForLingo for the General Lingo then the accessory cannot use AccessoryCapsToken bit 21. The test for this rule only runs when the accessory is USB host because only USB host accessories are allowed to set bit 21 in an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must not set AccessoryCapsToken bit 21 since RetiPodOptionsForLingo General lingo does not support analog USB audio routing</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AnalogUSBAudioRoutingAccCapWithoutIdentifyForDigitalAudioLingo">AnalogUSBAudioRoutingAccCapWithoutIdentifyForDigitalAudioLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The accessory must identify for the Digital Audio Lingo before sending an AccessoryCapsToken with bit 21 (analog USB audio routing) set to 1. The test for this rule only runs when the accessory is USB host because only USB host accessories are allowed to set bit 21 in an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must identify for the Digital Audio lingo before sending AccessoryCapsToken bit 21</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AnalogUSBAudioRoutingAccCapWithoutUSBHostDevice">AnalogUSBAudioRoutingAccCapWithoutUSBHostDevice</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The accessory must be a USB host, and the Apple device is a USB device, before sending an AccessoryCapsToken with bit 21 (analog USB audio routing) set to 1.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must be USB host in order to use AccessoryCapsToken bit 21</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CapsTokenWithoutLingoIdentified">CapsTokenWithoutLingoIdentified</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends a capability token without identifying for the appropriate lingo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent %1$@ without identifying for the appropriate lingo(s)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DuplicateTransactionIDDetected">DuplicateTransactionIDDetected</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a duplicate transaction ID without its transaction ID counter rolling over.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.6.1.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent transaction ID 0x%1$04X which was sent previously</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EndIDPSRequestingAuthSentWithoutAnySetFIDTokenValues">EndIDPSRequestingAuthSentWithoutAnySetFIDTokenValues</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an EndIDPS requesting authentication but did not send any  SetFIDTokenValues commands.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without sending a valid SetFIDTokenValues packets during IDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EndIDPSSentWhileAckFIDTokenValuesPending">EndIDPSSentWhileAckFIDTokenValuesPending</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory sends an EndIDPS while an AckFIDTokenValues response from the iPod is pending. rdar://problem/11940959 Vet EndIDPSSentWhileAckFIDTokenValuesPending</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS before receiving AckFIDTokenValues</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FirstCommandNotStartIDPS">FirstCommandNotStartIDPS</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the first command sent by the accessory is not StartIDPS. Note: Updated in 2.0 to always fire, not just when the IDPS claim has been selected.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 2-5)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the first command from the accessory must be StartIDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FirstTokenNotIdentifyToken">FirstTokenNotIdentifyToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the first token of the first SetFIDTokenValues command seen after (re)starting IDPS  is not an IdentifyToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send IdentifyToken as the first token of the first SetFIDTokenValues command</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GeneralLingoNotInIdentifyToken">GeneralLingoNotInIdentifyToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an IdentifyToken that does not identify for Gerneral Lingo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-68)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must identify for General Lingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetiPodOptionsForLingoDigitalAudioBeforeAnalogUSBAudioRoutingAccCap">GetiPodOptionsForLingoDigitalAudioBeforeAnalogUSBAudioRoutingAccCap</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The accessory must send GetiPodOptionsForLingo for the Digital Audio Lingo to make sure the iPod does not support the SetVideoDelay command before sending AccessoryCapsToken bit 21. The test for this rule only runs when the accessory is USB host because only USB host accessories are allowed to set bit 21 in an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must send GetiPodOptionsForLingo for the Digital Audio lingo before sending AccessoryCapsToken bit 21</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetiPodOptionsForLingoGeneralBeforeAnalogUSBAudioRoutingAccCap">GetiPodOptionsForLingoGeneralBeforeAnalogUSBAudioRoutingAccCap</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The accessory must send GetiPodOptionsForLingo for the General Lingo to make sure the iPod supports analog USB audio routing (bit 26) command before sending AccessoryCapsToken bit 21. The test for this rule only runs when the accessory is USB host because only USB host accessories are allowed to set bit 21 in an AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must send GetiPodOptionsForLingo for the General lingo before sending AccessoryCapsToken bit 21</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IDPSCommandSentBeforeStartIDPSACKed">IDPSCommandSentBeforeStartIDPSACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends SetFIDTokenValues or EndIDPS without first waiting for the iPod to  ACK a previously sent StartIDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an IDPS command before iPodAck was sent in response to StartIDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IDPSCommandSentWithoutStartIDPS">IDPSCommandSentWithoutStartIDPS</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends SetFIDTokenValues or EndIDPS without first sending StartIDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a SetFIDTokenValues or EndIDPS command without sending a StartIDPS first</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IDPSStartedButNotCompletedWithin3Seconds">IDPSStartedButNotCompletedWithin3Seconds</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the time between iPodAck for StartIDPS and EndIDPS is greater than 3 seconds</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory did not complete the IDPS process within 3 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationCommandSentTooSoonAfterFirstStartIDPS">IdentificationCommandSentTooSoonAfterFirstStartIDPS</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Complicated, but... Throw an error if the accessory sends IdentifyDeviceLingoes or Identify too soon after the first StartIDPS after device connection. "Too soon" means within 3 seconds of the first StartIDPS being seen, unless: a) the IDPS process completes successfully (IDPSStatus with status 0) b) the iPod sends a Bad Parameter ACK to that StartIDPS c) the accessory cancels the IDPS process (EndIDPS with status 2) d) the iPod responds with a "max connections reached" NACK, indicating that no more commands may be sent e) StartIDPS is NACKed such that NoIAPAfterStartIDPSNACK's error is thrown</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent Identify or IdentifyDeviceLingoes within 3 seconds of starting the IDPS process without first completing the IDPS process</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentifyingForAccessoryPowerLingoIsDeprecated">IdentifyingForAccessoryPowerLingoIsDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory tries to identify for Accessory Power lingo using StartIDPS, IDL, or legacy Identify.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (C.8)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory tried to identify for Accessory Power lingo which is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentifyingForMicrophoneLingoIsDeprecated">IdentifyingForMicrophoneLingoIsDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory trys to Identify for Microphone Lingo using StartIDPS, IDL, or legacy Identify.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (C.5)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory tried to identify for Microphone lingo which is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LegacyIdentifyAfterIDPS">LegacyIdentifyAfterIDPS</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The purpose of this rule is to catch accessories that try to use IdentifyDeviceLingoes or legacy Identify with iPods that support IDPS.  That is, we'll throw an error if IDL or Identify is used after the iPod has send IDPSStatus 0.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent Identify or IdentifyDeviceLingoes after the iPod indicated support for StartIDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LineOutCapsWithoutLineOutPreferences">LineOutCapsWithoutLineOutPreferences</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory indicates line out capability via an AccessoryCapsToken but did not set any  line out preferences via an iPodPreferenceToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory indicated line out capability in its AccessoryCapsToken but did not set a line out preference</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LineOutDisabledAfterLineOutPreferencesSet">LineOutDisabledAfterLineOutPreferencesSet</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if we're disabling the line out capability but have already set line out preferences during the IDPS process. rdar://problem/11942207 Vet {Line,Video}OutDisabledAfterLineOutPreferencesSet</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryCapsToken with line out disabled after setting line out preferences</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MaxConnectionsResponseIgnored">MaxConnectionsResponseIgnored</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends any command after the iPod NACKs a StartIDPS or IdentifyDeviceLingoes  command that no more connections are available.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a command after being notified the iPod has reached its maximum number of connections</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MicrophoneCapsTokenDeprecated">MicrophoneCapsTokenDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends the deprecated MicrophoneCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>MicrophoneCapsToken is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoIAPAfterStartIDPSNACK">NoIAPAfterStartIDPSNACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends any iAP command after receiving an ACK for StartIDPS with a status value other than 0x00 (Success), 0x04 (Bad Parameter), or 0x06 (Command Pending).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 2-4)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iAP command after receiving a negative iPodAck for StartIDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyIDLAfterStartIDPSNACK">NoTimelyIDLAfterStartIDPSNACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send an IdentifyDeviceLingoes command indicating unsupported accessory or General Lingo no auth and no Device ID within 800 ms of receiving an ACK with "Bad Parameter" status in response to a StartIDPS command.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Section 2.3)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send an IdentifyDeviceLingoes with General lingo, no options, and a Device ID of 0x0 or all fields set to 0xFF within 800 ms of receiving Bad Parameter iPodAck for StartIDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoTimelyResponseToRetiPodAuthenticationInfo">NoTimelyResponseToRetiPodAuthenticationInfo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to send AckiPodAuthenticatonInfo within 15 seconds of receiving RetiPodAuthenticationInfo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.24)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond with AckiPodAuthenticatonInfo within 15 seconds of RetiPodAuthenticationInfo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ProhibitedCommandSentDuringIDPS">ProhibitedCommandSentDuringIDPS</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a command other than GetiPodOptionsForLingo, RequestLingoProtocolVersion,  SetFIDTokenValues, EndIDPS, or another StartIDPS during the IDPS process.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory may only send GetiPodOptionsForLingo, RequestTransportMaxPayloadSize, RequestLingoProtocolVersion, SetFIDTokenValues, EndIDPS, or StartIDPS during the IDPS process</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryCapsTokenNotACKed">RequiredAccessoryCapsTokenNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required AccessoryCapsToken before sending an EndIDPS  requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first receiving an ACK for required AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryCapsTokenNotSent">RequiredAccessoryCapsTokenNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required AccessoryCapsToken before sending an EndIDPS  requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first sending required AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithFirmwareVersionNotACKed">RequiredAccessoryInfoTokenWithFirmwareVersionNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required AccessoryInfoToken containing the accessory firmware version before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS before iPod accepted required firmware version AccessoryInfoToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithFirmwareVersionNotSent">RequiredAccessoryInfoTokenWithFirmwareVersionNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required AccessoryInfoToken containing the accessory  firmware version before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first sending an AccessoryInfoToken with firmware version</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithHardwareVersionNotACKed">RequiredAccessoryInfoTokenWithHardwareVersionNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required AccessoryInfoToken containing the accessory  hardware version before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first receiving an ACK for required AccessoryInfoToken with hardware version</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithHardwareVersionNotSent">RequiredAccessoryInfoTokenWithHardwareVersionNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required AccessoryInfoToken containing the accessory  hardware version before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first sending required AccessoryInfoToken with hardware version</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithManufacturerNotACKed">RequiredAccessoryInfoTokenWithManufacturerNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required AccessoryInfoToken containing the  accessory manufacturer before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS before the iPod accepted required manufacturer name AccessoryInfoToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithManufacturerNotSent">RequiredAccessoryInfoTokenWithManufacturerNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required AccessoryInfoToken containing the accessory manufacturer  before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first sending an AccessoryInfoToken with manufacturer name</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithModelNumberNotACKed">RequiredAccessoryInfoTokenWithModelNumberNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required AccessoryInfoToken containing  the accessory model number before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS before iPod accepted required model number AccessoryInfoToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithModelNumberNotSent">RequiredAccessoryInfoTokenWithModelNumberNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required AccessoryInfoToken containing the accessory  model number before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first sending an AccessoryInfoToken with model number</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithNameNotACKed">RequiredAccessoryInfoTokenWithNameNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required AccessoryInfoToken containing  the accessory name before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS before iPod accepted required accessory name AccessoryInfoToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredAccessoryInfoTokenWithNameNotSent">RequiredAccessoryInfoTokenWithNameNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required AccessoryInfoToken containing the accessory  name before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first sending an AccessoryInfoToken with accessory name</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredBundleSeedIDPrefTokenNotACKed">RequiredBundleSeedIDPrefTokenNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required BundleSeedIDPrefToken  before sending an EndIDPS requesting authentication but indicated "Communication with iOS Applications"  support in its AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory indicated caps support for \'Communication with iOS Applications\' in its AccessoryCapsToken but sent EndIDPS without first receiving an ACK for required BundleSeedIDPrefToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredBundleSeedIDPrefTokenNotSent">RequiredBundleSeedIDPrefTokenNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required BundleSeedIDPrefToken before sending  an EndIDPS requesting authentication but indicated "Communication with iOS Applications" support in  its AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory capabilities included \'Communication with iOS Applications\', but accessory did not send required BundleSeedIDPrefToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredEAProtocolTokenNotACKed">RequiredEAProtocolTokenNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required EAProtocolToken before sending  an EndIDPS requesting authentication but indicated "Communication with iOS Applications" support in its AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory indicated caps support for \'Communication with iOS Applications\' in its AccessoryCapsToken but sent EndIDPS without iPod accepting required EAProtocolToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredEAProtocolTokenNotSent">RequiredEAProtocolTokenNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not send the required EAProtocolToken before sending an EndIDPS  requesting authentication but indicated "Communication with iOS Applications" support in its AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory indicated caps support for \'Communication with iOS Applications\' in its AccessoryCapsToken but sent EndIDPS without sending required EAProtocolToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredIdentifyTokenNotACKed">RequiredIdentifyTokenNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not receive an ACK for the required IdentifyToken before sending an EndIDPS  requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent EndIDPS without first receiving an ACK for required IdentifyToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredMicrophoneCapsTokenNotACKed">RequiredMicrophoneCapsTokenNotACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies for Microphone Lingo but does not receive an ACK for a  MicrophoneLingoToken before sending an EndIDPS requesting auth.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for Microphone lingo but sent EndIDPS before iPod accepted required MicrophoneCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequiredMicrophoneCapsTokenNotSent">RequiredMicrophoneCapsTokenNotSent</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies for Microphone Lingo but does not send the required  MicrophoneCapsToken before sending an EndIDPS requesting authentication.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send required MicrophoneCapsToken before sending EndIDPS after identifying for Microphone lingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetriedUnsupportedToken">RetriedUnsupportedToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory resends a token that the iPod responded to with a RetFIDTokenValues with status 3.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-86)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory retried setting an unsupported token</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetFIDTokenValuesSentWhileAckFIDTokenValuesPending">SetFIDTokenValuesSentWhileAckFIDTokenValuesPending</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a SetFIDTokenValues command while a RetFIDTokenValuesACKs response from the iPod is pending.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.41)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent another SetFIDTokenValues before receiving an AckFIDTokenValues for a previous one</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetFIDTokenValuesWithoutGetiPodOptionsForLingo">SetFIDTokenValuesWithoutGetiPodOptionsForLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory doesn't attempt to check the iPod's options using GetiPodOptionsForLingo before sending SetFIDTokenValues</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.3)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory should check Apple device capabilities using GetiPodOptionsForLingo before using SetFIDTokenValues</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetVideoDelayWithoutRetiPodOptionsForLingo">SetVideoDelayWithoutRetiPodOptionsForLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Before sending this command, the accessory must verify that RetiPodOptionsForLingo reports that bit 00 for Lingo 0x0A is set. If not set, then this rule will throw an error when SetVideoDelay is used.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent SetVideoDelay without first receiving RetiPodOptionsForLingo for Digital Audio lingo with option bit 0x00 set</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartIDPSRetriedTooQuickly">StartIDPSRetriedTooQuickly</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a StartIDPS command within 500 ms of a previous StartIDPS that was not ACKed. rdar://problem/11939864 Vet StartIDPSRetriedTooQuickly</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory retried StartIDPS within 500 ms of previous StartIDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartIDPSSentAfterBadParameterNACK">StartIDPSSentAfterBadParameterNACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends another StartIDPS command after receiving an ACK with  Bad Parameter status and no transaction ID.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 2-5)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent another StartIDPS even after receiving an ACK with 'Bad Parameter' status</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StartIDPSSentAfterRejection">StartIDPSSentAfterRejection</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a StartIDPS command after the iPod returns an IDPSStatus  indicating that the accessory is no longer eligible to use the IDPS process.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-99)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent StartIDPS after iPod indicated that accessory could not retry the IDPS process</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnrecognizedTransactionIDInResponse">UnrecognizedTransactionIDInResponse</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory responds to an iPod request without using a valid transaction ID that  the iPod provided.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.6.1.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory replied to command sent from iPod with unrecognized transaction ID</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutCapsWithoutVideoOutPreferences">VideoOutCapsWithoutVideoOutPreferences</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory indicates video capability via an AccessoryCapsToken but did not set any  video preferences via an iPodPreferenceToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-67)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory indicated video out capability in its AccessoryCapsToken but did not set any video out preferences</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutDisabledAfterVideoOutPreferencesSet">VideoOutDisabledAfterVideoOutPreferencesSet</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if we're disabling the video out capability but have already set some video out preferences during the IDPS process. rdar://problem/11942207 Vet {Line,Video}OutDisabledAfterLineOutPreferencesSet</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryCapsToken with video out disabled after setting video out preferences</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VolumePollingOrInquiryWithoutAccessoryCapsTokenChecksVolume">VolumePollingOrInquiryWithoutAccessoryCapsTokenChecksVolume</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory requests volume change notifications via Display Remotes  SetRemoteEventNotification or inquires for volume information using GetiPodStateInfo without having  finished IDPS successfully with the iPod accepting an AccessoryCapsToken that indicated the accessory checks  iPod volume.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.3.11)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory registered for volume change notifications or inquired about volume levels without indicating that it checks volume in the AccessoryCapsToken it sent during IDPS</td>
</tr>
</table>
<br>


<h2>HiddenShared</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Deprecated191kResistor30Pin">Deprecated191kResistor30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory has a 191k resistor.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 115)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>191 k ID resistors are deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Deprecated1MResistor30Pin">Deprecated1MResistor30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory has a 1M resistor.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 115)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>1 M ID resistors are deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Deprecated360kResistor30Pin">Deprecated360kResistor30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory has a 360k resistor. Changed to an error for radar rdar://problem/9098128</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 115)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>360 k ID resistors are deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FirstPacket20msDelayViolated">FirstPacket20msDelayViolated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the delay between the first sync byte and the first full packet is less than 20 ms. (This rule is implemented as Obj-C code in processEvent in RulesetController.)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.2.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not wait 20 ms after the first sync byte (packet sent after only %2$llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IAPSentWith255kResistor30Pin">IAPSentWith255kResistor30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory has a 255k resistor and sends an iAP packet.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 37)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iAP while presenting a 255 k ID resistor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodAttachWhenAccessoryAttached30Pin">IPodAttachWhenAccessoryAttached30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the user attaches the iPod while the accessory is already attached. rdar://problem/8816913 Rules misfire instead of resetting after clear or accessory detach and reattach</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must be disconnected before connecting an Apple Device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SecondByteNotSyncByte">SecondByteNotSyncByte</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the second byte sent by a connected accessory is not a sync byte (0xFF).  This is because the accessory must send a solo sync byte packet first followed by a full packet which starts with a sync byte</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.2.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must send an additional sync byte packet first</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SyncByteSentOverUSB">SyncByteSentOverUSB</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends sync bytes (0xFF) before the start of packet byte (0x55) on the  USB transport.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 52)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory should not send sync byte (0xFF) on this transport</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="TrafficSentBeforeAccessoryPowerTurnedOn30Pin">TrafficSentBeforeAccessoryPowerTurnedOn30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends any iAP traffic before accessory power goes high. (This rule is implemented as Objective-C code in processEvent in RulesetController.)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 35)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iAP command before iPod provided accessory power via pin 13</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="TrafficSentButPin20NotGrounded30Pin">TrafficSentButPin20NotGrounded30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends iAP traffic while pin 20 is ungrounded.  By virtue of the fact that the pin 20 measurement only arrives from the ATS 30-pin Box, this rule only runs on accessories that communicate via iAP-over-UART over the 30-pin connector.  It should not and does not apply to USB or BT.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (Table 2-10)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent data but accessory detect (pin 20) was not grounded</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="TrafficSentWithin80msOfAccessoryPower30Pin">TrafficSentWithin80msOfAccessoryPower30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if a connected (ACC_DETECT driven low) accessory sends any iAP traffic earlier than 80 ms after Accessory Power goes high.   (This rule is implemented as Objective-C code in processEvent in RulesetController.)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 35)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not wait 80 ms after seeing Acc Power high before sending the first byte (sent after only %llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="TrafficSentWithoutUsesiAPClaim">TrafficSentWithoutUsesiAPClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends iAP traffic but the "Uses iAP" claim was not selected. (This rule is implemented as Objective-C code in processEvent in RulesetController.)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iAP data but the accessory's claims indicate it does not communicate via iAP</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnexpectedAccResistor30Pin">UnexpectedAccResistor30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an ID resistor is detected but no resistor has been claimed.  Because the claims UI only allows for supported resistor values to be specified, this rule will fire if the accessory resistor is deprecated or reserved.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>an ID resistor is present, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VbusDrivenWithoutUSBChargingPowerSourceClaim30Pin">VbusDrivenWithoutUSBChargingPowerSourceClaim30Pin</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory drives Vbus but the ClaimNameUSBChargingPowerSource claim was not selected. Notes: rdar://problem/6804130</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory is driving Vbus, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>


<h2>AssistiveTouch</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchRequiredCommandsNotSeenCA">AssistiveTouchRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the AssistiveTouch test if AssistiveTouch was not turned on</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands were not seen during the AssistiveTouch test</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchWithoutAccessoryCapsToken">AssistiveTouchWithoutAccessoryCapsToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the SetiPodPreferences or an iPodPreference token uses AssistiveTouch without first claiming capability for it during IDPS</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-71)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ without declaring AssistiveTouch capability during IDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchWithoutLingoOptions">AssistiveTouchWithoutLingoOptions</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if SetiPodPreferences or an iPodPreference token uses AssistiveTouch without first verifying iPod support from RetiPodOptionsForLingo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ without receiving RetiPodOptionsForLingo for Simple Remote with AssistiveTouch bit</td>
</tr>
</table>
<br>


<h2>VoiceOver</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="InvalidScaleDisplayFactor">InvalidScaleDisplayFactor</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an event type 0x10 (Scale Display Factor) with a  factor of 0.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-36)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent VoiceOverEvent with invalid Scale Display Factor</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverEventLastSectionsDiffer">VoiceOverEventLastSectionsDiffer</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory sends VoiceOverEvent for event type 0x0A (Input Text) or 0x16 (Speak String) and the last section index differs within a series.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-36)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent VoiceOverEvent for event type %1$u (0x%1$02X) with different last section value</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverEventMultipleSectionsOutOfOrder">VoiceOverEventMultipleSectionsOutOfOrder</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory sends VoiceOverEvent for event type 0x0A (Input Text) or 0x16 (Speak String) with multiple sections that are out of order or duplicate.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-36)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent VoiceOverEvent either out of order or duplicated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverEventWithMixedEventTypes">VoiceOverEventWithMixedEventTypes</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory sends VoiceOverEvent for event type 0x0A (Input Text) or 0x16 (Speak String) and mixes the event types within a series.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-36)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent VoiceOverEvent and mixed usage of event type 10(0x0A) and event type 22(0x16) within a series</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverRequiredCommandsNotSeenCA">VoiceOverRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the VoiceOver test if a VoiceOverEvent command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the VoiceOver test were not seen</td>
</tr>
</table>
<br>


<h2>CommunicationwithiOSApplications</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryDataTransferAfterSessionClosed">AccessoryDataTransferAfterSessionClosed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends an AccessoryDataTransfer for a session ID that was closed by the iPod.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.46)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent AccessoryDataTransfer for a session ID which the iPod already closed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryDataTransferAfterSessionClosedAndACKed">AccessoryDataTransferAfterSessionClosedAndACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AccessoryDataTransfer for a session ID that was closed by the iPod and ACKed by the accessory.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.46)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryDataTransfer for a session ID which the iPod already closed and accessory acknowledged closed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryDataTransferBeforeOpenDataSessionForProtocolACKed">AccessoryDataTransferBeforeOpenDataSessionForProtocolACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AccessoryDataTransfer command before successfully DevACK'ing  an OpenDataSessionForProtocol command from the iPod.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryDataTransfer before sending an AccessoryAck indicating success in response to OpenDataSessionForProtocol</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CloseDataSessionNotDevACKed30Pin">CloseDataSessionNotDevACKed30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to send DevACK in response to CloseDataSession within 500 ms</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.46)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to respond to CloseDataSession with an AccessoryAck within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommWithAppsClaimedWithoutValidAccessoryCapsToken">CommWithAppsClaimedWithoutValidAccessoryCapsToken</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory claims support for "Communication with iOS Applications"  but does not set the correct bit (bit 9) for this feature in its AccessoryCapsToken.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory's claims indicate support for iOS applications but the accessory sent an AccessoryCapsToken without the appropriate bit set</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommWithAppsCommandSentWithoutCommWithAppsAccessoryCapsTokenACKed">CommWithAppsCommandSentWithoutCommWithAppsAccessoryCapsTokenACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a communication with iOS applications-related command but did not receive an ACK from the iPod for an AccessoryCapsToken with the appropriate bit set.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.7.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an iOS-related command but did not receive acknowledgement for iOS applications in AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommunicationWithiOSApplicationsRequiredCommandsNotSeenCA">CommunicationWithiOSApplicationsRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Communication with iOS Applications test if a data transfer (from Apple device or accessory) and the Apple device didn't reject support</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands were not seen during the Communication with iOS Applications test</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DidNotWaitForSessionSpaceAvailableAfterSessionWriteFailure">DidNotWaitForSessionSpaceAvailableAfterSessionWriteFailure</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>If the accessory receives an ACK status of SessionWriteFailure (0x17), it must wait for this notification  before retrying an AccessoryDataTransfer command in the same session.  This rule will fire an error if the accessory trys to send AccessoryDataTransfer before seeing the SessionSpaceAvailable notification</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.54)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must wait for SessionSpaceAvailable notification before sending AccessoryDataTransfer for session ID %1$hu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="EAProtocolTokenOrBundleSeedIDPrefTokenWhenCommunicationWithiOSUnusable">EAProtocolTokenOrBundleSeedIDPrefTokenWhenCommunicationWithiOSUnusable</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an EAProtocolToken or BundleSeedIDPrefToken after the iPod has sent RetiPodOptionsForLingo for General Lingo with bit 13 (Communication with iOS applications) set to 0, or after the iPod has responded with a non-zero ACK to GetiPodOptionsForLingo for General Lingo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ without first receiving RetiPodOptionsForLingo for General lingo with option bit 13 (0x0D) set</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FlowControlNotificationIgnored">FlowControlNotificationIgnored</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AccessoryDataTransfer before waiting the appropriate amount of  time specified by a flow control notification from the iPod.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryDataTransfer before waiting the amount of time specified by a flow control notification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IncorrectBadParameterSentForiPodDataTransfer">IncorrectBadParameterSentForiPodDataTransfer</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a DevACK with "Bad Parameter" status in response to an  iPodDataTransfer command with a valid session ID.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.49)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a Bad Parameter AccessoryAck in response to iPodDataTransfer with a valid session ID</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NextAccessoryDataTransferTooSoon">NextAccessoryDataTransferTooSoon</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>The accessory must not send a new AccessoryDataTransfer packet until the previous one has been acknowledged  (as successful or not) or a 500 ms timeout has expired.  If an accessory tries to send another AccessoryDataTransfer before that condition is met then this rule will fire an error. (This rule is independent of session ID).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not wait for iPodAck of AccessoryDataTransfer or 500 ms timeout before sending next AccessoryDataTransfer</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRequestTransportMaxPayloadSizeBeforeAccessoryDataTransfer">NoRequestTransportMaxPayloadSizeBeforeAccessoryDataTransfer</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Before sending the first AccessoryDataTransfer command, the accessory must send a RequestTransportMaxPayloadSize command to determine the maximum packet size that it can stream. This rule will fire an error if ReturnTransportMaxPayloadSize is not seen (because RequestTransportMaxPayloadSize was not sent).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must receive a response to RequestTransportMaxPayloadSize before sending first AccessoryDataTransfer</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="OpenDataSessionNotDevACKed">OpenDataSessionNotDevACKed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to send DevACK in response to OpenDataSessionForProtocol within 500 ms</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.45)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to respond to OpenDataSessionForProtocol with an AccessoryAck within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="TooManyRetriesOfAccessoryDataTransfer">TooManyRetriesOfAccessoryDataTransfer</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>From spec: - If a 500 ms timeout occurs before an AccessoryDataTransfer command is acknowledged successfully, the accessory  may resend the same packet with the same transaction ID. If the accessory retries 10 times without  receiving a successful acknowledgement, it must close the session and assume that the transfer failed. - If an AccessoryDataTransfer command is acknowledged with a SessionWriteFailure status (0x17), the accessory  may send a packet with the same transaction ID containing the remaining data. If no additional bytes are  successfully accepted after 10 such attempts, the accessory must close the session and assume that the transfer  failed. See Table 2-16 (page 82). This rule will fire an error if more than 10 AccessoryDataTransfer packets are sent without an intervening  ACK (other than SessionWriteFailure) or intervening CloseDataSession. This should cover both cases  described above.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must close session ID %1$hu due to repeated failure of AccessoryDataTransfer</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnknownSessionIDInAccessoryDataTransfer">UnknownSessionIDInAccessoryDataTransfer</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends an AccessoryDataTransfer for a session ID that does not match a  session ID returned in an OpenDataSessionForProtocol command sent from the iPod and ACKed by the accessory.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryDataTransfer for an unknown session ID</td>
</tr>
</table>
<br>


<h2>AssistiveTouchiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AssistiveTouchRequiredMessagesNotSeenCAiAP2">AssistiveTouchRequiredMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if any of the mandatory messages are not seen during the test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>


<h2>WiFiiAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WiFiMessagesNotSeenCAiAP2">WiFiMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to send mandatory messages during the Wi-Fi test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature</td>
</tr>
</table>
<br>


<h2>AccessoryEqualizer</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetCurrentEQIndex">NoResponseToGetCurrentEQIndex</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires a warning if the accessory doesn't reply to GetCurrentEQIndex with RetCurrentEQIndex within 2.5 seconds.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.8.4)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory did not reply to GetCurrentEQIndex with RetCurrentEQIndex within 2.5 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetEQIndexName">NoResponseToGetEQIndexName</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires a warning if the accessory doesn't reply to GetEQIndexName with RetEQIndexName within 3 seconds.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.8.9)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory did not reply to GetEQIndexName with RetEQIndexName within 3 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetEQSettingCount">NoResponseToGetEQSettingCount</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires a warning if the accessory doesn't reply to GetEQSettingCount with RetEQSettingCount within 3 seconds.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.8.7)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory did not reply to GetEQSettingCount with RetEQSettingCount within 3 seconds</td>
</tr>
</table>
<br>


<h2>SimpleRemote</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="FirstCameraButtonStatusIsZero">FirstCameraButtonStatusIsZero</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the first camera button status is not 1 (down).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a CameraButtonStatus (up) without first sending a CameraButtonStatus (down)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdenticalContextButtonStatusSpacingLessThan30ms">IdenticalContextButtonStatusSpacingLessThan30ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This message rule throws an error if the time between two successive identical ContextButtonStatus commands is less than 30 ms. 2 ms tolerance added for rdar://problem/6987507 Timing related rules should have some tolerance to prevent the wormhole effect</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent identical ContextButtonStatus commands less than 30 ms apart (actual %1$llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdenticalVideoButtonStatusSpacingLessThan30ms">IdenticalVideoButtonStatusSpacingLessThan30ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This message rule throws an error if the time between two successive identical VideoButtonStatus commands is less than 30 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.9)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent identical VideoButtonStatus commands less than 30 ms apart (actual %1$llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MissingContextButtonStatus">MissingContextButtonStatus</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if there is no ContextButtonStatus command within 100 ms after another ContextButtonStatus command, except if the last ContextButtonStatus command had a zero payload indicating all buttons were up. 2 ms tolerance added for rdar://problem/6987507 Timing related rules should have some tolerance to prevent the wormhole effect</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send ContextButtonStatus within 100 ms of another ContextButtonStatus whose button status was non-zero</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MissingVideoButtonStatus">MissingVideoButtonStatus</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if there is no VideoButtonStatus command within 100 ms after another VideoButtonStatus command, except if the last VideoButtonStatus command had a zero payload indicating all buttons were up.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.9)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send VideoButtonStatus within 100 ms of another VideoButtonStatus whose button status was non-zero</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RadioButtonStatusSpacingGreaterThan100ms">RadioButtonStatusSpacingGreaterThan100ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory doesn't send a RadioButtonStatus within 100 ms of a RadioButtonStatus with a non-zero button status. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.13)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>more than 100 ms have elapsed since the last RadioButtonStatus command without sending another</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RadioButtonStatusSpacingLessThan30ms">RadioButtonStatusSpacingLessThan30ms</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory sends two RadioButtonStatus commands within 30 ms of each other with a non-zero buttonStatus. Note: This rule has a 2 ms tolerance built in due to rdar://problem/6827868</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.13)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent two RadioButtonStatus commands within 30 ms of each other with a non-zero buttonStatus</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RestrictedContextButtonStatusFromiOSDevice">RestrictedContextButtonStatusFromiOSDevice</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>iOS Devices are only allowed to use a subset of the ContextButtonStatus states, so this rule will throw an error if the CA is running with an iOS Device and that device uses a restricted  ContextButtonStatus state. (See section "Controlling Applications Using the Simple Remote Lingo" R42, p.52). Note: we are making the assumption that the device is an iOS device if the accessory registers for the  NowPlayingFocus notification. See rdar://problem/8145159.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.8)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent restricted button state in ContextButtonStatus when communicating with iOS device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SimpleRemoteRequiredCommandsNotSeenCA">SimpleRemoteRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Simple Remote test if a Simple Remote lingo command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Simple Remote test were not seen</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WarnZeroCameraButtonStatusMissing">WarnZeroCameraButtonStatusMissing</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw a warning if a camera button status with zero status isn't sent within 200 ms of a camera button status with non-zero status</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.14)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory did not send a CameraButtonStatus (up) within 200 ms of a CameraButtonStatus (down)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ZeroCameraButtonStatusMissing">ZeroCameraButtonStatusMissing</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if two successive camera button statuses within 200 ms of each other have non-zero values  (i.e. there is no intervening camera button status with zero status)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.2.14)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent two successive CameraButtonStatus (down) commands within 200 ms of each other without an intervening CameraButtonStatus (up) command</td>
</tr>
</table>
<br>


<h2>UsesiAP</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryInfoContainsAppleTrademark">AccessoryInfoContainsAppleTrademark</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0 (External Only)</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the Accessory's Product Info contains publicly released trademarks http://www.apple.com/legal/trademark/guidelinesfor3rdparties.html Including but not limited to... "The Apple word mark is not part of the product name" "You may not use or register, in whole or in part, Apple, iPod, iTunes, Macintosh, iMac, or any other Apple trademark, ..."</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory violated \"%@\" trademark and must not use Apple trademarks in manufacturer or product names</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessorySentDeprecatedCommand">AccessorySentDeprecatedCommand</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends a deprecated command.  Deprecated commands are defined in the lktspec.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (C)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>%1$@ lingo %2$@ command is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryStatusNotificationCommandWithoutAccessoryInfoToken">AccessoryStatusNotificationCommandWithoutAccessoryInfoToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory attempts to use an accessory status notification command without first setting the AccessoryInfoToken to indicate that it supports status notifications.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-72)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the accessory has not yet indicated support for status notifications with an AccessoryInfoToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryStatusNotificationForSameStatusTypeSentTooFrequently">AccessoryStatusNotificationForSameStatusTypeSentTooFrequently</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error is the accessory sends AccessoryStatusNotification for the same status type more frequently than once every 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.52)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent AccessoryStatusNotification for the same status type more frequently than once every 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryStatusNotificationMissing">AccessoryStatusNotificationMissing</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory does not send an AccessoryStatusNotification for each status type included in the accessory's RetAccessoryStatusNotification within 500ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.52)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send an initial AccessoryStatusNotification for each registered notification within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryStatusNotificationWithUnrecognizedStatusType">AccessoryStatusNotificationWithUnrecognizedStatusType</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends AccessoryStatusNotification with a status type that wasn't included in the Accessory's RetAccessoryStatusNotification.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.51)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a status type that was not included in RetAccessoryStatusNotification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessoryStatusNotificationWithoutRetAccessoryStatusNotification">AccessoryStatusNotificationWithoutRetAccessoryStatusNotification</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends AccessoryStatusNotification without previously sending RetAccessoryStatusNotification.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.52)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an AccessoryStatusNotification without sending a RetAccessoryStatusNotification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AlarmDeprecated">AlarmDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if an accessory tries perform any alarm related actions</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 4-59)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory attempted to use the alarm, which is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthCertClassDoesNotMatchIdentifiedLingoes">AuthCertClassDoesNotMatchIdentifiedLingoes</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory has identified for a lingo not permitted by its authentication certificate class. Notes: Name updated in 1.3 from AuthCertClassDoesNotMatchIDLLingoes in 1.1 and updated with IDPS support</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>device lingoes identified (0x%1$x) do not match the certificate class %2$d</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AuthV2GetSignatureTimeout">AuthV2GetSignatureTimeout</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to respond to GetAccessoryAuthenticationSignature within 75 seconds when using V2.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to respond to GetAccessoryAuthenticationSignature within 75 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="BadSignatureReturned">BadSignatureReturned</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory ever receives an AckAccessoryAuthenticationStatus NACK.  Although it is a likely sign of larger problems, this conditions only causes a warning (rather than an error) because it is still posssible for the accessory to complete authentication on the second try.  Other rules will catch a complete failure to authenticate successfully.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.22)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory received AckAccessoryAuthenticationStatus command indicating the accessory returned a bad signature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CancelCommandBeforeAccessoryCapsToken">CancelCommandBeforeAccessoryCapsToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory attempts to use the CancelCommand if option bit 19 was not set in the AccessoryCapsToken when identifying via IDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-71)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>async process large data (bit 19) was not set in AccessoryCapsToken before using CancelCommand</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CancelCommandForUnsupportedCommandID">CancelCommandForUnsupportedCommandID</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory attempts to use the CancelCommand to cancel a command other than GetTrackArtworkData, GetNumberCategorizedDBRecords, GetDBTrackInfo, GetUIDTrackInfo, or GetPBTrackInfo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.60)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>cancel not supported for %@ command %@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommWithAppsAccessoryCapsTokenWithoutCommWithAppsClaim">CommWithAppsAccessoryCapsTokenWithoutCommWithAppsClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory indicates communication with iOS applications capability in an AccessoryCapsToken but the "Communication with iOS Applications" claim was not selected.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory declared support for iOS applications in AccessoryCapsToken but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommandFromUnidentifiedLingo">CommandFromUnidentifiedLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory uses a command from a lingo that was not included in the identification process. For IDL, only commands from identified lingoes may be used.  For legacy Identify, commands from inferred lingoes (e.g.,  legacy Identify also earns lingoes 2 and 3) may also be used. Notes: Updated with IDPS, iPod Out and USB Host Mode support.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-65)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a command in a lingo for which it did not successfully identify (check SetFIDTokenValues packet for errors)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommandRequiresAuthenticationV2">CommandRequiresAuthenticationV2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if a command requiring V2 authentication is sent before authentication is completed and the grace period has expired. Notes: Updated with IDPS support.  Updated to support DisplayPort in Wildcat and iPod Out in Apex.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a command which requires authentication V2 without first authenticating with V2</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommandSentAfterIdentificationFailed">CommandSentAfterIdentificationFailed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a non-identification command after the identification process has failed.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a non-identification command after identification failed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="CommandSentBeforeIdentificationCompleted">CommandSentBeforeIdentificationCompleted</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory sends a command after sending an Identify or IdentifyDeviceLingoes but before receiving an ACK from the iPod, or after sending EndIDPS but before receiving an IDPSStatus from the iPod. Notes: rdar://problem/6893714  Also, 1.x throws a warning.  2.0 should throw an error.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent command before identification process completed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DeprecatedBitsSet">DeprecatedBitsSet</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sets a bit that is deprecated or a bitgroup value that is deprecated.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory set deprecated %@ in bitfield %@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DidNotRegisterForBothNowPlayingApplicationNotifications">DidNotRegisterForBothNowPlayingApplicationNotifications</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory tried to register for only NowPlayingApplicationBundleName or only NowPlayingApplicationDisplayName.  It must register for both.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.6)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory must register for both NowPlayingApplicationBundleName and NowPlayingApplicationDisplayName notifications</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DisplayRemoteRequiredCommandsNotSeenCA">DisplayRemoteRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the DisplayRemote test if a required DisplayRemote command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Display Remote test were not seen</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExceededMaxPacketPayloadSize">ExceededMaxPacketPayloadSize</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires an error if the accessory sends any command with a packet payload greater than the max packet payload size returned from ReturnTransportMaxPayloadSize. (No error is fired if ReturnTransportMaxPayloadSize has not been seen).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.15)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ lingo %2$@ command with a packet payload size of %3$d, which is greater than the max packet payload size of %4$d set by ReturnTransportMaxPayloadSize</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetOrSetiPodPreferencesVideoOutRequiresAuth">GetOrSetiPodPreferencesVideoOutRequiresAuth</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory GetiPodPreferences or SetiPodPreferences command requiring authentication  is sent before authentication is completed and the grace period has expired. Notes: Updated with IDPS support</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.36)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>using GetiPodPreferences or SetiPodPreferences with the video out class requires authentication</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetWithoutAttemptedNotificationRegistration">GetWithoutAttemptedNotificationRegistration</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if a Get command is sent without attempting to register for the appropriate notifications. NOTE: Accessories are allowed to send GetPlayStatus when entering Extended Interface mode for the first time without attempting to register for notifications to comply with FirstRemoteUICommandNotGetPlayStatus.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.4.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent %1$@ without first attempting %2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetiPodOptionsWithoutTryingGetiPodOptionsForLingo">GetiPodOptionsWithoutTryingGetiPodOptionsForLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends GetiPodOptions without first trying to see if the iPod supports  GetiPodOptionsForLingo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.30)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent GetiPodOptions without first trying GetiPodOptionsForLingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IAPSentAfterUnsupportedAccessory">IAPSentAfterUnsupportedAccessory</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends any iAP traffic after it has sent an IDL with all parameters set to 0xFFFFFFFF indicating an unsupported accessory</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.7)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an iAP packet after sending IdentifyDeviceLingoes indicating an unsupported accessory</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IAPSentDuringFlowControlWaitTime">IAPSentDuringFlowControlWaitTime</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends any iAP packets after receiving a FlowControl  notification and before the FlowControl wait time elapses.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.54)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not wait for the FlowControl wait time to elapse</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodAuthBeforeDeviceAuth">IPodAuthBeforeDeviceAuth</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if authentication of the iPod is started before authentication of the device has started. This rule will not fire if the accessory fails CommandRequiresAuthenticationV2.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.4)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent iPod authentication-related command before successfully completing accessory authentication</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IPodOutWithoutClaim">IPodOutWithoutClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory attempts to use any iPod Out features without the user first checking the "iPod Out" claim.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory used an iPod Out command, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Identification">Identification</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the iPod sends an iPodAck and there are more than one pending RequestLingoProtocolVersion commands. This is a dubious rule.  Where is the spec language for this?  rdar://problem/11929863 Vet the Identification rule</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>Got iPodAck for RequestLingoProtocolVersion, but there were %1$lu pending RequestLingoProtocolVersion commands. Do not send new RequestLingoProtocolVersion requests before receiving a reply or a timeout for the previous one</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="InsufficientRetryingOfIDL">InsufficientRetryingOfIDL</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory gives up too early in the face of non-response to IDL. Although not a formal spec requirement, we want to encourage accessories to continue to retry IDL even in the absence of a NACK, because iPhone may be non-responsive for a period immediately after boot or wake-up.  For the purposes of this rule, the accessory should try sending IDL at least 5 times and for at least 5 seconds before giving up, at which point an accessory that supports 3G iPod may fall back and attempt a legacy Identify.  Accessories that don't support 3G iPod should continue trying IDL forever.  (Can they really *never* give up?)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to retry IdentifyDeviceLingoes five times within five seconds after receiving no response to IdentifyDeviceLingoes</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LegacyIdentifyForDigitalAudio">LegacyIdentifyForDigitalAudio</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends Identify for Digital Audio Lingo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (4.10)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent legacy Identify for Digital Audio Lingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LineOutPreferencesSeenWithoutLineOutAccessoryClaim">LineOutPreferencesSeenWithoutLineOutAccessoryClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets preferences for line out but the "Line Out Accessory" claim was not selected. Notes: rdar://problem/6804130</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set line out preferences but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LocationLingoIdentificationWithoutLocationClaim">LocationLingoIdentificationWithoutLocationClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies as supporting Location lingo but the "Location" claim was not selected.  Notes: rdar://problem/6804130</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for Location lingo, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MissingRequestTransportMaxPayloadSizeDuringIDPS">MissingRequestTransportMaxPayloadSizeDuringIDPS</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to send RequestTransportMaxPayloadSize during IDPS</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.3.2.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to send RequestTransportMaxPayloadSize during IDPS</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoIdentificationAfterPowerCycle30Pin">NoIdentificationAfterPowerCycle30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not identify itself using StartIDPS, IdentifyDeviceLingoes, or legacy Identify within five seconds of Accessory Power going high.  It is intended to catch accessories that fail to handle iPod sleep/wake cycles.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 35)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not identify within 3 seconds of accessory power going high</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoNewIdentificationBetweenIDLAndACK">NoNewIdentificationBetweenIDLAndACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an Identify or IDL or StartIDPS is sent too soon (within 500 ms) after a previous IDL that has not yet been ACK'd.   A threshold of 500 ms is used.  The purpose of this rule is to catch accessories that time-out too quickly in the face of iPod/iPhone IDL non-response on (say) boot or wake-up.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent new Identify, IdentifyDeviceLingoes, or StartIDPS less than 500 ms (actual %1$llu ms) after IdentifyDeviceLingoes and before iPodAck</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetAccessoryAuthenticationInfo">NoResponseToGetAccessoryAuthenticationInfo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory fails to respond to  GetAccessoryAuthenticationInfo with RetAccessoryAuthenticationInfo within 15 seconds. rdar://problem/11930379 Vet NoResponseToGetAccessoryAuthenticationInfo. Timeout at 15 seconds or 2?</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory failed to respond to GetAccessoryAuthenticationInfo within 15 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoResponseToGetAccessoryInfo">NoResponseToGetAccessoryInfo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to respond to a GetAccessoryInfo command within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.33)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not reply to GetAccessoryInfo for accessory info type %1$u (0x%1$02X) with RetAccessoryInfo within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PendingACK">PendingACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory retries a command before the timeout specified by the iPod</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.2)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory retried command ID 0x%1$x before the %2$llu ms timeout specified by the Apple device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Power100mAExceeded30Pin">Power100mAExceeded30Pin</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the average current exceeds 100 mA at any time.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiHardwareSpecFileReference (pg. 48)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>average current %1$.1lf mA exceeds 100.0 mA</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RFTunerIdentificationWithoutClaim">RFTunerIdentificationWithoutClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies as supporting RF Tuner lingo but the "RF Tuner" claim was not selected.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for RF Tuner lingo but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RFTunerWithoutClaim">RFTunerWithoutClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error of the accessory attempts to use any RF Tuner features without the user  first checking the "RF Tuner" claim.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory used an RF Tuner command, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RedundantGetAfterNotification">RedundantGetAfterNotification</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if a Get is sent multiple times after registering for a notification for the same information</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.4.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent multiple Gets after registering for a notification for the same information</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ReferToRetiPodOptionsForLingoGeneralBit27NotUSBHostModeBit0">ReferToRetiPodOptionsForLingoGeneralBit27NotUSBHostModeBit0</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule issues a warning whenever the iPod sends a RetiPodOptionsForLingo for USB Host Mode lingo with bit 0 set informing the developer that this bit is deprecated and that RetiPodOptionsForLingo General lingo bit 27 should be used to determine if the iPod supports invoking USB Host Mode via hardware.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-132)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>RetiPodOptionsForLingo USB Host Mode lingo bit 0 is deprecated. Refer to RetiPodOptionsForLingo General lingo bit 27 to determine USB Host Mode hardware invocation capability.</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RemoteUIIdentificationWithoutRemoteUIClaim">RemoteUIIdentificationWithoutRemoteUIClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies as supporting Remote UI but the "Remote UI (Head Unit)" claim  was not selected.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for Extended Interface lingo but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RemoteUIModeCommandsRequireLingo4">RemoteUIModeCommandsRequireLingo4</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory uses any of RequestExtendedInterfaceMode, EnterExtendedInterfaceMode or ExitExtendedInterfaceMode commands without having first identified for Extended Interface (lingo 4). Also throw this error if no identify command has been sent at all. Notes: Updated with IDPS support</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.11.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>RequestExtendedInterfaceMode, SetUIMode (Extended Interface mode), or ExitExtendedInterfaceMode may only be used if the accessory successfully identifies for Extended Interface (lingo 0x04)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RepeatRetAccessoryAuthenticationInfoSentBeforeACK">RepeatRetAccessoryAuthenticationInfoSentBeforeACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if another RetAccessoryAuthenticationInfo is sent before the previously sent one has been ACKed, unless a new GetAccessoryAuthenticationInfo has been received.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (2.4.3)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>new RetAccessoryAuthenticationInfo sent before the previous one was acknowledged</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RepeatedGetSentTooQuickly">RepeatedGetSentTooQuickly</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if a Get is sent within 1 second of receiving the Ret after the previous Get.  Note, the rule only checks the following commands, as these are the ones explicitly called out by the spec: // ExtendedInterface::GetPlayStatus // ExtendedInterface::GetShuffle // ExtendedInterface::GetRepeat // ExtendedInterface::GetIndexedPlayingTrackInfo // DisplayRemote::GetiPodStateInfo // DisplayRemote::GetPlayStatus</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.4.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a %1$@ command less than 1000 ms from the previous response (actual %2$lld ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequestApplicationLaunchRetriedAfterNACK">RequestApplicationLaunchRetriedAfterNACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory attempts to use the RequestApplicationLaunch command after the iPod NACK'd with any non-zero status value (other than 0x06 = cmd pending).</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.64)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory retried RequestApplicationLaunch after iPod sent iPodAck indicating that it already failed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequestApplicationLaunchUnsupported">RequestApplicationLaunchUnsupported</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory attempts to use the RequestApplicationLaunch command if option bit 24 was not enabled in RetiPodOptionsForLingo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the iPod did not return support for applications auto-launching in RetiPodOptionsForLingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequestIdentifyNotAnswered">RequestIdentifyNotAnswered</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory fails to respond to a RequestIdentify command with IdentifyDeviceLingoes, StartIDPS, or legacy Identify within 3 seconds. Notes: Updated with IDPS support</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.1)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to RequestIdentify within 3 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RequestLingoProtocolVersionWithoutTryingGetiPodOptionsForLingo">RequestLingoProtocolVersionWithoutTryingGetiPodOptionsForLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends RequestLingoProtocolVersion without first trying GetiPodOptionsForLingo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.12)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent RequestLingoProtocolVersion %1$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryAuthenticationInfoCertClassUnparsable">RetAccessoryAuthenticationInfoCertClassUnparsable</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires an error when the cert class is unparsable from the cert serial number information.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.18)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent unparsable certificate class information</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryAuthenticationInfoCertSerialUnparsable">RetAccessoryAuthenticationInfoCertSerialUnparsable</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires an error when the cert serial number value in the certificate is unparsable, which indirectly means that the certificate is also unparsable.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.18)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent unparsable certificate information</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryAuthenticationInfoMaxSectionIndexMismatch">RetAccessoryAuthenticationInfoMaxSectionIndexMismatch</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires a warning if the accessory sends a multisection RetAccessoryAuthenticationInfo whose certificateMaximumSectionIndex does not match the certificateMaximumSectionIndex of the first RetAccessoryAuthenticationInfo packet.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.18)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>the accessory sent a certificate section with a maximum section index of %1$d after sending one with a maximum section index of %2$d</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryAuthenticationInfoOutOfRangeSectionIndex">RetAccessoryAuthenticationInfoOutOfRangeSectionIndex</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires an error if the accessory sends RetAccessoryAuthenticationInfo with certificateCurrentSectionIndex greater than certificateMaximumSectionIndex.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.18)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the accessory sent a certificate section with an index (%1$d) greater than the maximum section index (%2$d)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryAuthenticationInfoWithEmptyCertDataPayload">RetAccessoryAuthenticationInfoWithEmptyCertDataPayload</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule fires an error if the accessory sends RetAccessoryAuthenticationInfo with an empty certificateData payload.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.18)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent RetAccessoryAuthenticationInfo with an empty certificate data payload</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryInfoTypeTwoDeprecated">RetAccessoryInfoTypeTwoDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory sends RetAccessoryInfo with Accessory Info Type 0x02 (minimum supported iPod firmware version)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-46)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory info type 0x02 for command RetAccessoryInfo is deprecated</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryStatusNotificationMissingAfterSetAccessoryStatusNotification">RetAccessoryStatusNotificationMissingAfterSetAccessoryStatusNotification</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory does not respond to SetAccessoryStatusNotification  with a RetAccessoryStatusNotification within 500 ms.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.50)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not respond to SetAccessoryStatusNotification (transaction ID = %hu) with a RetAccessoryStatusNotification within 500 ms</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RetAccessoryStatusNotificationWithUnrecognizedBits">RetAccessoryStatusNotificationWithUnrecognizedBits</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends RetAccessoryStatusNotification that sets a bit that wasn't included in the iPod's SetAccessoryStatusNotification.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.51)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set a bit that was not included in SetAccessoryStatusNotification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetEventNotificationBeforeRetSupportedEventNotification">SetEventNotificationBeforeRetSupportedEventNotification</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends SetEventNotification prior to receiving  RetSupportedEventNotification or ACK bad parameter of GetSupportedEventNotification from the iPod.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent SetEventNotification prior to receiving RetSupportedEventNotification or ACK bad parameter of GetSupportedEventNotification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetEventNotificationWithUnrecognizedBits">SetEventNotificationWithUnrecognizedBits</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends SetEventNotification that sets a bit that wasn't included in the iPod's RetSupportedEventNotification.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.4.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set a bit that was not included in RetSupportedEventNotification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetUIModeSentWheniPodOutUnusable">SetUIModeSentWheniPodOutUnusable</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends SetUIMode attempting to enable iPod Out mode after the iPod has sent RetiPodOptionsForLingo with lingo ID set to 0x0D and bit 0x00 set to 0, or after the iPod has responded  with a non-zero ACK to GetiPodOptionsForLingo with a LingoID of 0x0D.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-132)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to enter iPod Out mode when iPod Out is unusable</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SimpleRemoteCommandSentWithoutSimpleRemoteClaim">SimpleRemoteCommandSentWithoutSimpleRemoteClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a Simple Remote command but the "Simple Remote" claim was not selected.  Notes: rdar://problem/6804130</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a Simple Remote command, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SimpleRemoteIdentifiedWithoutSimpleRemoteClaim">SimpleRemoteIdentifiedWithoutSimpleRemoteClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies for Simple Remote command but the "Simple Remote" claim was not selected.  Notes: rdar://problem/9137131</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for Simple Remote, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SportsLingoIdentificationWithoutGymEquipmentClaim">SportsLingoIdentificationWithoutGymEquipmentClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies as supporting Sports lingo but the "Gym Equipment" claim was not selected. Notes: Supersedes existing IDLLingo9WithoutGymEquipmentClaim</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for Sports lingo but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="StorageLingoIdentificationWithoutStorageLingoAccessoryClaim">StorageLingoIdentificationWithoutStorageLingoAccessoryClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies as supporting Storage lingo but the "Storage Lingo Accessory"  claim was not selected. Notes: rdar://problem/6804130</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for Storage lingo but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostModeIdentificationWithoutClaim">USBHostModeIdentificationWithoutClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory identifies as supporting USB Host Mode lingo but the "USB Host Mode" claim was not selected.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory identified for USB Host Mode lingo but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="USBHostModeWithoutClaim">USBHostModeWithoutClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error of the accessory attempts to use any USB Host Mode features without the user first checking the "USB Host Mode" claim.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory used a USB Host Mode command but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutPreferencesSeenWithoutVideoOutAccessoryClaim">VideoOutPreferencesSeenWithoutVideoOutAccessoryClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sets preferences for video out but the "Video Out Accessory" claim was not selected.  Notes: rdar://problem/6804130</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory set video out preferences but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VideoOutTurnedOnWithoutVideoOutPreferences">VideoOutTurnedOnWithoutVideoOutPreferences</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory turns on video out during IDPS but does not set any video out preferences.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.36)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory turned on video out during IDPS without setting any video out preferences</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverCommandBeforeAccessoryCapsToken">VoiceOverCommandBeforeAccessoryCapsToken</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory attempts to use a VoiceOver command if option bit 0x11 was not set in the AccessoryCapsToken when identifying via IDPS.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.13)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a VoiceOver command, but the VoiceOver bit was not set in AccessoryCapsToken</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverCommandBeforeRetiPodOptionsForLingo">VoiceOverCommandBeforeRetiPodOptionsForLingo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory attempts to use a VoiceOver command if option bit 0x0A was not enabled for lingo 0x02 in RetiPodOptionsForLingo.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.13)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a VoiceOver command, but the iPod did not return support in RetiPodOptionsForLingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="VoiceOverWithoutClaim">VoiceOverWithoutClaim</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error of the accessory attempts to use any VoiceOver command without the user first checking the "VoiceOver" claim.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a VoiceOver command, but the accessory's claims do not indicate support</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WarnAboutRequestiPodModelNum">WarnAboutRequestiPodModelNum</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory ever sends RequestiPodModelNum, as a reminder that this is not a future-proof way to determine iPod capabilities.  The command itself is perfectly legal, but many accessory developers have made this  mistake.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 3-1)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>do not use RequestiPodModelNum to determine iPod capabilities. Consider using GetiPodOptionsForLingo, GetiPodOptions, or RequestLingoProtocolVersion instead.</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="WarnAboutRequestiPodSoftwareVersion">WarnAboutRequestiPodSoftwareVersion</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory ever sends RequestiPodSoftwareVersion, as a reminder that this is not a  future-proof way to determine iPod capabilities.  The command itself is perfectly legal, but many accessory developers have made this mistake.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (3.3.8)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>do not use RequestiPodSoftwareVersion to determine iPod capabilities; consider using GetiPodOptionsForLingo, GetiPodOptions, or RequestLingoProtocolVersion instead</td>
</tr>
</table>
<br>


<h2>RemoteUIHeadUnit</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExtendedInterfaceModeWithoutRegistrationForDatabaseChangeNotification">ExtendedInterfaceModeWithoutRegistrationForDatabaseChangeNotification</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory enters Extended Interface mode but did not attempt to register for Database Changed notifications via General lingo's SetEventNotification command. If the iPod does not support this notification type, the error is not thrown.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.11.2.2.5)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory entered Extended Interface mode without attempting to register for Database Changed notifications (using General lingo SetEventNotification)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="ExtendedInterfaceRequiredCommandsNotSeenCA">ExtendedInterfaceRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Extended Interface test if an Extended Interface lingo command was not seen</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Extended Interface test were not seen</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetLyricsRepeatFrequencyTooFast">GetLyricsRepeatFrequencyTooFast</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule generates a warning if lyrics are being requested faster than every 0.5 seconds. rdar://problem/11979428 Vet GetLyricsRepeatFrequencyTooFast</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory is sending requests for lyrics faster than once every 0.5 seconds</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetNumPlayingTracksNotSentBeforeGetPBTrackInfo">GetNumPlayingTracksNotSentBeforeGetPBTrackInfo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if GetPBTrackInfo is sent and GetNumPlayingTracks has not been sent previously.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not check the number of tracks in playback engine before calling GetPBTrackInfo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="GetPlayStatusBeforePlayControlACK">GetPlayStatusBeforePlayControlACK</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends a GetPlayStatus command after sending a command that changes the play status but not waiting for an ACK of that command. rdar://problem/11979187 Vet GetPlayStatusBeforePlayControlACK</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>GetPlayStatus sent before iPodAck of PlayControl received</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IncorrectSelectDBRecordFieldLength">IncorrectSelectDBRecordFieldLength</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if an accessory sends SelectDBRecord(65535), since this almost certainly was meant to be  SelectDBRecord(-1) instead.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (5.1.20)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent SelectDBRecord with index of 65535 but likely intended an index of -1</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Lingo4DBSelection">Lingo4DBSelection</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if database reset (via ResetDBSelection or ResetDBSelectionHierarchy) followed by database selection (via SelectDBRecord  or SelectSortDBRecord) without an intervening GetNumberCategorizedDBRecords to establish record counts.  This rule is  implemented in Obj-C.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (5.1.19)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>ReturnNumberCategorizedDBRecords for category '%1$@' not received before sending %2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="Lingo4OnlyInExtendedInterfaceMode">Lingo4OnlyInExtendedInterfaceMode</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule generates an error if a Remote UI command is sent while not in Remote UI mode.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.11.2)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>extended interface command sent when iPod is not in extended UI mode</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoGetArtworkFormats">NoGetArtworkFormats</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule generates an error if GetIndexedPlayingTrackInfo with infoType = 7, GetTrackArtworkTimes, or GetTrackArtworkData is sent without sending GetArtworkFormats first. rdar://problem/11979415 Vet NoGetArtworkFormats</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.11.2.3)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent GetIndexedPlayingTrackInfo with InfoType=7, GetTrackArtworkTimes, or GetTrackArtworkData without sending GetArtworkFormats first</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoGetCurrentPlayingTrackChapterInfo">NoGetCurrentPlayingTrackChapterInfo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule generates a warning if GetCurrentPlayingTrackChapterInfo was not sent before sending  GetCurrentPlayingTrackChapterPlayStatus, SetCurrentPlayingTrackChapter, GetCurrentPlayingTrackChapterName. Note: If the accessory is signed up for notifications, they may get chapter information from a notification. rdar://problem/11979211 Vet NoGetCurrentPlayingTrackChapterInfo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory did not send GetCurrentPlayingTrackChapterInfo before sending GetCurrentPlayingTrackChapterPlayStatus, SetCurrentPlayingTrackChapter, or GetCurrentPlayingTrackChapterName</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoRequestLingoProtocolVersionForLingo4">NoRequestLingoProtocolVersionForLingo4</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the Remote UI commands are issued without checking the version or the options for the lingo first.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent Extended Interface lingo commands before checking Extended Interface protocol version or checking the iPod options for Extended Interface Lingo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PlayControlCommandCodeDeprecated">PlayControlCommandCodeDeprecated</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule will throw a warning if a deprecated PlayControl command code is sent by the accessory.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 5-49)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>PlayControl command %1$@ (0x%2$02X) is deprecated please use command %3$@ (0x%4$02X) instead</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PlayControlCommandNotEndFFREWAfterStartFF">PlayControlCommandNotEndFFREWAfterStartFF</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule will throw an error if any PlayControl command is sent after StartFF is sent but before EndFF/REW is sent.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 5-49)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a PlayControl command that is not End FF/REW after sending Start FF</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PlayControlCommandNotEndFFREWAfterStartREW">PlayControlCommandNotEndFFREWAfterStartREW</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.5</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule will throw an error if any PlayControl command is sent after StartREW is sent but before EndFF/REW is sent.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (Table 5-49)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a PlayControl command that is not End FF/REW after sending Start REW</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PlayControlResumeiPodWithoutThirdPartyApplicationCommunication">PlayControlResumeiPodWithoutThirdPartyApplicationCommunication</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the accessory sends PlayControl Resume iPod (0x0E) while not interacting with a third-party application rdar://problem/11769275</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (1.8)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent PlayControl Resume iPod (0x0E) without current interaction with a third-party application</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RecordIndexOutOfBounds">RecordIndexOutOfBounds</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if record index used by SelectDBRecord or SelectSortDBRecord is greater than the record count for that category</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (5.1.20)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>record index %1$d is out of bounds (there are %2$d records in this category)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RemoteUIEntryTooSoonAfterExit">RemoteUIEntryTooSoonAfterExit</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if an accessory re-enters Remote UI mode within 500 milliseconds of leaving it. Although not strictly illegal, this is almost certainly a sign that the accessory is behaving badly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory re-entering Extended Interface mode within 500 ms of exiting (entered after only %1$llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="RemoteUIExitTooSoonAfterEntry">RemoteUIExitTooSoonAfterEntry</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if an accessory exits Remote UI mode within 500 milliseconds of entering it. Although not strictly illegal, this is almost certainly a sign that the accessory is behaving badly.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory exited Extended Interface mode within 500 ms of entering (exited after only %1$llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetCurrentPlayingTrackChapterBeforeReturnCurrentPlayingTrackChapterInfo">SetCurrentPlayingTrackChapterBeforeReturnCurrentPlayingTrackChapterInfo</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if SetCurrentPlayingTrackChapter was sent before receiving ReturnCurrentPlayingTrackChapterInfo. rdar://problem/11979219 Vet SetCurrentPlayingTrackChapterBeforeReturnCurrentPlayingTrackChapterInfo</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory sent SetCurrentPlayingTrackChapter before receiving ReturnCurrentPlayingTrackChapterInfo</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetCurrentPlayingTrackChapterOutOfBounds">SetCurrentPlayingTrackChapterOutOfBounds</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the chapter index requested to be played by SetCurrentPlayingTrackChapter is out of bounds. rdar://problem/11979406 Vet SetCurrentPlayingTrackChapterOutOfBounds</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>chapter index %u is greater or equal to the chapter count %u</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetDisplayImageTooLate">SetDisplayImageTooLate</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if an accessory sends SetDisplayImage more than 15 seconds after entering Remote UI mode. Although not strictly illegal, this may be a sign that the accessory is attempting to use SetDisplayImage to fake  out custom UI.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (5.1.46)</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory called SetDisplayImage more than 15 seconds after entering Extended Interface mode (actual %llu ms)</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SetPlayStatusChangeNotificationOneByteFormSentWithoutVerifyingFourByteFormUnsupported">SetPlayStatusChangeNotificationOneByteFormSentWithoutVerifyingFourByteFormUnsupported</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 2.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if an accessory sends the SetPlayStatusChangeNotification command in its one-byte form without first receiving an iPodAck to SetPlayStatusChangeNotification in its four-byte form with a status code other than Success</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (5.1.35)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent the one-byte form of SetPlayStatusChangeNotification without first trying the four-byte form</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="UnselectingTracksNotAllowed">UnselectingTracksNotAllowed</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws an error if the user sends SelectDBRecord or SelectSortDBRecord with the special record index -1 (unselect) for a category other than track.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentMFiFirmwareSpecFileReference (5.1.20)</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>unselecting tracks is not allowed</td>
</tr>
</table>
<br>


<h2>LineOutAccessory</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AnalogAudioOutRequiredCommandsNotSeenCA">AnalogAudioOutRequiredCommandsNotSeenCA</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error during the Analog Audio Out test the accessory doesn't set line out prefs (except if the Apple device doesn't support them)</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the required commands for the Analog Audio Out test were not seen</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NoExplicitSetiPodPreferencesAudio">NoExplicitSetiPodPreferencesAudio</a></b> <i>(Product Plan Rule)</i></td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 1.3</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>This rule throws a warning if the accessory does not set its line out preferences within 2 seconds after receiving an ACK to an IdentifyDeviceLingoes. Notes: Timer changed to start from ACK to IDL instead of from authentication completed. No IDPS related changes required.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>accessory's claims indicate support for line out but it failed to configure line out via SetiPodPreferences within two seconds of receiving ACK for IdentifyDeviceLingoes</td>
</tr>
</table>
<br>


<h2>PoweriAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevicePoweredAccessoryFeatureNotSelectedCAiAP2">DevicePoweredAccessoryFeatureNotSelectedCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if device powered accessory doesn't have the Device Powered feature selected.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>device powered accessory does not have the Device Powered feature selected</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevicePoweredAccessoryPowerMessagesNotSeenCAiAP2">DevicePoweredAccessoryPowerMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.1</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if the accessory fails to send required messages and is device powered</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see %1$@ while testing the %2$@ feature with a device powered accessory</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DevicePoweredAccessoryUpdateMessagesNotDeclarediAP2">DevicePoweredAccessoryUpdateMessagesNotDeclarediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Throw an error if device powered accessory doesn't send or receive StartPowerUpdates, PowerUpdate and StopPowerUpdates messages</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>device powered accessory did not declare to send/receive required %1$@ message%2$@ %3$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="NonDevicePoweredAccessorySentAccessoryPowerModeiAP2">NonDevicePoweredAccessorySentAccessoryPowerModeiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a non device-powered accessory sends a StartPowerUpdates with an AccessoryPowerMode</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>non device-powered accessory sent a StartPowerUpdates message with an AccessoryPowerMode parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PowerSourceAccessoryInitialPowerSourceUpdateNotSeeniAP2">PowerSourceAccessoryInitialPowerSourceUpdateNotSeeniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if an initial PowerSourceUpdate isn't seen after identification with required parameters within 1 second after identification accepted</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>power source accessory did not send a %1$@ with parameter%2$@ %3$@ within 1 second after identification completed</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PowerSourceAccessoryInitialStartPowerUpdatesNotSeeniAP2">PowerSourceAccessoryInitialStartPowerUpdatesNotSeeniAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if they don't request power updates soon after identification</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Warning:</td>
<td>power source accessories should send StartPowerUpdates after identification</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PowerSourceAccessoryRequiredMessagesNotDeclarediAP2">PowerSourceAccessoryRequiredMessagesNotDeclarediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if StartPowerUpdates, PowerUpdate, PowerSourceUpdate and StopPowerUpdates aren't declared as sent or received</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>power source accessory did not declare to send/receive required power source message%1$@ %2$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="PowerSourceUpdateInsufficientPowerSourceUsageSeenForClaimsCAiAP2">PowerSourceUpdateInsufficientPowerSourceUsageSeenForClaimsCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire if a valid AvailableCurrentForDevice isn't seen with DeviceBatteryShouldChargeIfPowerIsPresent set to YES for a power source accessory during CA tests</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see PowerSourceUpdate message with parameter AvailableCurrentForDevice indicating enough current to support claims and parameter DeviceBatteryShouldChargeIfPowerIsPresent set to YES to demonstrate charging while testing the Power Source feature</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="SerialNoTimelyExitFromIntermittentHighPowerModeiAP2">SerialNoTimelyExitFromIntermittentHighPowerModeiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not stop drawing high power within 1 second of receiving a PowerUpdate message NOTE: this rule is serial only because we cannot write a USB rule to take power notifications over USB and correlate them with current readings from the ATS Lightning Box</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not stop drawing high power within 1 second after being notified to switch from Intermittent High Power mode to Low Power mode</td>
</tr>
</table>
<br>


<h2>LinkLayer</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AccessorySentInvalidLinkPacketCAiAP2">AccessorySentInvalidLinkPacketCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a packet is delivered with an invalid payload.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>N/A</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an invalid link packet</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkDetectSequenceSentTooEarlyiAP2">LinkDetectSequenceSentTooEarlyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends another Detect Sequence within 900 miliseconds of sending the previous one.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not wait 1 second before resending the Apple device detection sequence</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkDetectSequenceSentTooLateiAP2">LinkDetectSequenceSentTooLateiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends another Detect Sequence after 1100 milisecond of sending the previous one.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory waited longer than 1 second before resending the Apple device detection sequence</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketACKAfterCumulativeAcknowledgmentTimeoutiAP2">LinkPacketACKAfterCumulativeAcknowledgmentTimeoutiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory did not send an ACK when the timeout negotiated with Apple device expires.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send an ACK when the Cumulative Acknowledgement Timeout that was negotiated during link synchronization expired</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketACKNumberInvalidiAP2">LinkPacketACKNumberInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory acks an invalid packet sequence number.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a packet with invalid Packet Acknowledgement Number of %1$llu</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketEAKNumberInvalidiAP2">LinkPacketEAKNumberInvalidiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends an EAK packet with invalid packet sequence numbers.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an EAK packet with invalid Packet Sequence Number of %1$@</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketEAKSentWithoutPacketsOutOfOrderiAP2">LinkPacketEAKSentWithoutPacketsOutOfOrderiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends an EAK packet when there is no packet out of order received.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent an EAK packet without previously receiving any packets out of order</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationCumulativeACKTimeoutNotNegotiatediAP2">LinkPacketLinkSynchronizationCumulativeACKTimeoutNotNegotiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not continue to negotiate link sync when the cumulative ACK timeout does not match.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory completed link synchronization without negotiating the Cumulative Acknowledgement Timeout parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationLinkVersionNotNegotiatediAP2">LinkPacketLinkSynchronizationLinkVersionNotNegotiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not continue to negotiate link sync when the link version does not match.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory completed link synchronization without negotiating the Link Version parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationMaxCumulativeACKNotNegotiatediAP2">LinkPacketLinkSynchronizationMaxCumulativeACKNotNegotiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not continue to negotiate link sync when the max number of cumulative ACK does not match.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory completed link synchronization without negotiating the Maximum Cumulative Acknowledgements parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationMaxNumOfRetransmissionsNotNegotiatediAP2">LinkPacketLinkSynchronizationMaxNumOfRetransmissionsNotNegotiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not continue to negotiate link sync when max number of retransmissions does not match.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory completed link synchronization without negotiating the Maximum Number of Retransmissions parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationNegotiationNotConcludediAP2">LinkPacketLinkSynchronizationNegotiationNotConcludediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not ACK a SYN+ACK packet which parameters matched.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not complete link synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationNumberOfRetriesExceedediAP2">LinkPacketLinkSynchronizationNumberOfRetriesExceedediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory exchanges more than 10 SYN+ACK packets to establish the link.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not complete link synchronization within the maximum number of retries</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationReactivationBefore80MsiAP2">LinkPacketLinkSynchronizationReactivationBefore80MsiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory try to re-initialize link before 80 ms of accessory powered by device.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not wait at least 80 ms after Accessory Power resumed before re-initializing the link</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationRetransmissionTimeoutNotNegotiatediAP2">LinkPacketLinkSynchronizationRetransmissionTimeoutNotNegotiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not continue to negotiate link sync when the retransmission timeout does not match.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory completed link synchronization without negotiating the Retransmission Timeout parameter</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationSessionNotNegotiatediAP2">LinkPacketLinkSynchronizationSessionNotNegotiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not continue to negotiate link sync when the session does not match.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory completed link synchronization without negotiating iAP2 session types</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketLinkSynchronizationStartSYNPacketInConjunctionWithOtherControlBitiAP2">LinkPacketLinkSynchronizationStartSYNPacketInConjunctionWithOtherControlBitiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory attempts to start the link sending a SYN packet in conjunction with any other control bit.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a SYN packet with one or more other control bits also set</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketMaxNumberOfRetransmissionsExceedediAP2">LinkPacketMaxNumberOfRetransmissionsExceedediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends more retransmission packets than the maximum.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory exceeded the Maximum Number of Retransmissions that was negotiated during link synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketMaxPacketLengthExceedediAP2">LinkPacketMaxPacketLengthExceedediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends packet with packet length greater than the negotiated one.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory exceeded the Maximum Received Packet Length that was negotiated during link synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketNoSYNWithinTimeoutAfterRSTiAP2">LinkPacketNoSYNWithinTimeoutAfterRSTiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory does not send a SYN packet before the timeout, after the Apple device has sent a RST packet.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send a SYN packet within 1 second of receiving a RST packet from the Apple device</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketNumberOfOutstandingPacketsExceedediAP2">LinkPacketNumberOfOutstandingPacketsExceedediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sent more packets than the device's proposed max number of outstanding packets.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory exceeded the Maximum Number of Outstanding Packets (%1$hhu) that was specified during link synchronization</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketRetransmittedBeforeRetransmissionTimeoutiAP2">LinkPacketRetransmittedBeforeRetransmissionTimeoutiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory retransmits a packet before the restransmission timeout negotiated with the Apple device.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory retransmitted a packet before the Retransmission Timeout expired</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketSentToUnsupportedDeviceiAP2">LinkPacketSentToUnsupportedDeviceiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sends a packet after the apple device has responded the iAP2 Detect sequence with an unsupported packet.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory attempted to start link negotiation after the Apple device sent an unrecognized byte sequence</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketSequenceNumberDuplicatediAP2">LinkPacketSequenceNumberDuplicatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory sent a duplicated packet sequence number.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory sent a Packet Sequence Number (%1$llu) that has previously been used</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketiAP1CommunicationNotInitiatediAP2">LinkPacketiAP1CommunicationNotInitiatediAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the accessory did not send an iAP1 StartIDPS or lack of compatibility packet withi 500ms when the Apple Device does not support iAP2.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send an StartIDPS or an incompatibility packet within 500 ms of receiving confirmation that the Apple device supports iAP1</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="LinkPacketiAP2DetectSequenceNotSentiAP2">LinkPacketiAP2DetectSequenceNotSentiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the first byte sequence sent by the accessory is not the iAP2 support byte sequence.</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>accessory did not send the iAP2 detect sequence</td>
</tr>
</table>
<br>


<h2>DeviceNotifications</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="DeviceNotificationsOptionalMessagesNotSeenCAiAP2">DeviceNotificationsOptionalMessagesNotSeenCAiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 5.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if optional but supported messages are not seen during the Device Notifications test</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>did not see supported message%2$@ %1$@ while testing the %3$@ feature</td>
</tr>
</table>
<br>


<h2>MessageBasediAP2</h2>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="AppleDeviceMessageContainsUnknownParametersiAP2">AppleDeviceMessageContainsUnknownParametersiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.4</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an info message if an Apple device sourced message contains an unknown parameter, notifying developers that they should not rely on that parameter</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Information:</td>
<td>message contains deprecated %@ %@, which the accessory must ignore</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationFirmwareVersionEmptyiAP2">IdentificationInformationFirmwareVersionEmptyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the FirmwareVersion parameter in IdentificationInformation is empty</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the FirmwareVersion parameter in IdentificationInformation cannot be empty</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationHardwareVersionEmptyiAP2">IdentificationInformationHardwareVersionEmptyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the HardwareVersion parameter in IdentificationInformation is empty</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the HardwareVersion parameter in IdentificationInformation cannot be empty</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationManufacturerEmptyiAP2">IdentificationInformationManufacturerEmptyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the Manufacturer parameter in IdentificationInformation is empty</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the Manufacturer parameter in IdentificationInformation cannot be empty</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationModelIdentifierEmptyiAP2">IdentificationInformationModelIdentifierEmptyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the ModelIdentifier parameter in IdentificationInformation is empty</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the ModelIdentifier parameter in IdentificationInformation cannot be empty</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationNameEmptyiAP2">IdentificationInformationNameEmptyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the Name parameter in IdentificationInformation is empty</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the Name parameter in IdentificationInformation cannot be empty</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="IdentificationInformationSerialNumberEmptyiAP2">IdentificationInformationSerialNumberEmptyiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.0</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if the SerialNumber parameter in IdentificationInformation is empty</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>the SerialNumber parameter in IdentificationInformation cannot be empty</td>
</tr>
</table>
<br>

<table>
<tr>
<td valign="top" align="right">Rule:</td>
<td><b><a name="MessageContainsUnknownParametersiAP2">MessageContainsUnknownParametersiAP2</a></b> </td>
</tr>
<tr>
<td valign="top" align="right">Version:</td>
<td>ATS 3.2</td></tr>
<tr>
<td valign="top" align="right">Description:</td>
<td>Fire an error if a message or group parameter contains an unknown parameter</td>
</tr>
<tr>
<td valign="top" align="right">Specification:</td>
<td>CurrentAISpecFileReference</td>
</tr>
<tr>
<td valign="top" align="right">Error:</td>
<td>message contains unknown %@ %@</td>
</tr>
</table>
<br>

</body>
</html>
